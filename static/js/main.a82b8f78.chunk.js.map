{"version":3,"sources":["img/Star_Wars_Logo.svg","img/lightsaber_blue2.png","components/Intro/Intro.js","components/v1/helpers/api.js","components/v1/helpers/apiController.js","components/v1/Detail/Detail.js","components/v1/Loader/Loader.js","components/v1/Error/Error.js","components/v1/PageLinks/PageLinks.js","components/v1/List/List.js","components/v1/Results/Results.js","components/v1/v1/V1.js","components/v2/helpers/api.js","components/v2/hooks/useSwApi.js","components/v2/Detail/Detail.js","components/v2/helpers/textHelpers.js","components/v2/Loader/Loader.js","components/v2/Error/Error.js","components/v2/PageLinks/PageLinks.js","components/v2/List/List.js","components/v2/Results/Results.js","components/v2/v2/V2.js","components/v3/helpers/api.js","components/v3/hooks/useSwApi.js","components/v3/Detail/Detail.js","components/v3/helpers/textHelpers.js","components/v3/Loader/Loader.js","components/v3/Error/Error.js","components/v3/PageLinks/PageLinks.js","components/v3/List/List.js","components/v3/Results/Results.js","components/v3/v3/V3.js","webpack:///./src/img/Star_Wars_Logo.svg?574e","components/v4/v4/V4.js","components/v5/helpers/api.js","components/v5/hooks/reducers.js","components/v5/hooks/fetchSingle.js","components/v5/hooks/useSwApi.js","components/v5/v5/V5.js","components/v6/helpers/helpers.js","components/v6/helpers/api.js","components/v6/helpers/reducers.js","components/v6/helpers/fetchData.js","components/v6/hooks/useSwApi.js","components/v6/displays/Categories.js","components/v6/displays/Loader/Loader.js","components/v6/displays/Pages.js","components/v6/displays/PageLinks.js","components/v6/displays/LoaderForItem.js","components/v6/helpers/prepareItemData.js","components/v6/displays/Detail.js","components/v6/displays/Header.js","components/v6/v6/V6.js","components/App/App.js","index.js"],"names":["module","exports","Intro","setVersion","className","src","starWarsLogo","alt","onClick","e","style","borderColor","appConstants","SW_COLOR","checkResponse","resp","ok","status","statusText","errorToReturn","Error","name","message","param","a","headers","Headers","append","fetch","checkedResp","json","data","error","memoizedFetch","fn","cache","args","hasOwnProperty","apply","this","result","memoize","categories","apiController","params","searchTerm","searchPage","url","Promise","resolve","reject","results","dataWithNames","JSON","parse","stringify","item","title","push","sort","b","episode_id","uuid","require","Detail","props","detailObj","detail","Object","keys","map","key","handleValue","val","Array","isArray","vals","k","Loader","ligthsaber","errorDisplay","resetAction","PageLinks","linksArray","link","clickHandler","color","matchColor","display","List","list","Fragment","id","Results","count","page","fetching","setError","term","showDetailHandler","searchHandler","renderContent","toUpperCase","slice","listExtended","constants","renderList","linkCount","linkPagesNeeded","Math","ceil","i","renderPageLinks","V1","useState","setData","setCount","setPage","setDetail","setFetching","setTerm","handleSearch","undefined","toString","errStr","cat","res","useSwApi","isFetching","setIsFetching","useEffect","dataReducer","prev","dataToReduce","termObject","handleResults","fetchData","config","method","Accept","dataToSet","formatText","str","split","word","join","capitalize","replace","removeUnderscores","inObj","outObj","singles","lists","technical","technicalKeys","forEach","includes","getRenderObj","objKey","length","renderLists","isData","V2","console","log","renderSingles","singlesKey","Number","isNaN","parseFloat","toLocaleString","crawl","getDisplayItem","termAndId","getPage","num","getIsUrl","_extends","assign","target","arguments","source","prototype","call","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","x","y","width","height","fill","d","_ref","svgRef","viewBox","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","urlCatsByTerm","idFromUrl","extractIdsFromUrls","urlsArray","V4","dataId","setDataId","pageIds","newTermObject","allData","termId","keyInResult","idsFromUrls","idsToFetch","currentDetail","detailKey","ids","idTerm","inId","parseInt","dataTerm","setTimeout","setByDataId","pageCount","pages","pageLinksArray","getTerms","termsArray","pageId","el","changeToId","renderMenu","detailData","keyConvert","arrays","keyInObj","unshift","dataKey","arrayItems","returnItems","itemName","renderPreparedDetail","values","valInside","renderDetail","getItemId","category","itemNumber","singleReducer","itemId","newItem","items","getUrlInfo","dataWithName","checkedData","initialDataState","films","people","planets","species","starships","vehicles","requestForSingles","setRequestForSingles","req","initialSingle","V5","listSingles","setListSingles","renderSingle","inData","created","getSingleContent","allIdsArray","catName","idItem","inItem","itemCat","itemNum","idNumber","displayItem","renderIdItem","CONSTANTS","capitalizeSentenceCase","words","removeEmptyEntries","charCodeAt","pageReducer","newItems","newCount","newPageArray","handleSingleResults","handlePageResults","fetchSingle","fetchPage","pageNumber","requestForPage","setRequestForPage","requestForItem","setRequestForItem","currentPageData","pageItems","pageLinks","currentItemData","currentDisplayData","setCurrentDisplayData","idsArray","keyInItem","getUrlIdsFromItem","pageDisplayArray","numberOfPages","itemData","itemDataToSet","value","outArray","urlCat","urlItemId","itemFromData","urlItemData","Categories","currentCategory","changeCategory","Pages","changeItem","currentItem","children","changePage","currentPage","LoaderForItem","prepareItemData","initObj","characters","residents","homeworld","orderByKeyGroups","dateStr","inStr","getLocaleNumber","Date","toUTCString","splice","entries","Header","V6","displayCategory","setDisplayCategory","displayPage","setDisplayPage","setDisplayItem","newDisplayPage","App","version","onChange","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a82b8f78.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Star_Wars_Logo.0a12a758.svg\";","module.exports = __webpack_public_path__ + \"static/media/lightsaber_blue2.02916d98.png\";","import React from 'react';\nimport './Intro.css';\n\nimport starWarsLogo from '../../img/Star_Wars_Logo.svg';\nimport appConstants from '../../constants.json';\n\nconst Intro = ({ setVersion }) => {\n\treturn (\n\t\t<div className=\"intro__welcome-box\">\n\t\t\t<div className=\"intro__star-wars\">\n\t\t\t\t<img src={starWarsLogo} alt=\"Star Wars Logo\" />\n\t\t\t</div>\n\n\t\t\t<h3>Welcome to your interface for the Star Wars API.</h3>\n\t\t\t<h3>\n\t\t\t\tEnter and follow your nose for all kinds of Star Wars facts and\n\t\t\t\tstats from films 1 - 7.\n\t\t\t</h3>\n\t\t\t<div className=\"intro__go-box\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"intro__go-button\"\n\t\t\t\t\tonClick={(e) => setVersion('6')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborderColor: `${appConstants.SW_COLOR}`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tLet's Go!\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Intro;\n","function memoize(fn) {\r\n\tconst cache = {};\r\n\treturn async function(...args) {\r\n\t\tif (cache[args] && !cache[args].hasOwnProperty('error')) {\r\n\t\t\treturn cache[args];\r\n\t\t}\r\n\r\n\t\tconst result = await fn.apply(this, args);\r\n\t\tcache[args] = result;\r\n\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nfunction checkResponse(resp) {\r\n\tif (!resp.ok) {\r\n\t\tconst { status, statusText } = resp;\r\n\t\tconst errorToReturn = new Error();\r\n\t\terrorToReturn.name = `${status}`;\r\n\t\terrorToReturn.message = `${statusText}`;\r\n\r\n\t\tthrow errorToReturn;\r\n\t}\r\n\treturn resp;\r\n}\r\n\r\nasync function fetchAPI(param) {\r\n\ttry {\r\n\t\tconst headers = new Headers();\r\n\t\theaders.append('Content-type', 'application/json');\r\n\t\theaders.append('Accept', 'application/json');\r\n\r\n\t\tconst resp = await fetch(param, { headers });\r\n\t\tconst checkedResp = await checkResponse(resp);\r\n\t\tconst json = await checkedResp.json();\r\n\r\n\t\treturn { data: json };\r\n\t} catch (error) {\r\n\t\treturn { error };\r\n\t}\r\n}\r\n\r\nexport const memoizedFetch = memoize(fetchAPI);\r\n","import { memoizedFetch } from './api';\r\n\r\nconst BASE_URL = 'https://swapi.co/api/';\r\n\r\nexport const categories = [\r\n\t'films',\r\n\t'people',\r\n\t'planets',\r\n\t'species',\r\n\t'starships',\r\n\t'vehicles'\r\n];\r\n\r\nconst apiController = async (params) => {\r\n\tconst { searchTerm, searchPage } = params;\r\n\tconst url = `${BASE_URL}${searchTerm}/?page=${searchPage}`;\r\n\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\tconst data = await memoizedFetch(url);\r\n\t\tlet results = data.data.results;\r\n\t\t// console.log('data.data', data.data);\r\n\t\tif (results[0].hasOwnProperty('name') && searchTerm !== 'films') {\r\n\t\t\tresolve(data);\r\n\t\t} else {\r\n\t\t\t// console.log('results', results);\r\n\t\t\tlet dataWithNames = JSON.parse(JSON.stringify(data));\r\n\t\t\tdataWithNames.data.results = [];\r\n\t\t\tlet item;\r\n\t\t\tfor (item of results) {\r\n\t\t\t\titem['name'] = item.title;\r\n\t\t\t\tdataWithNames.data.results.push(item);\r\n\t\t\t}\r\n\t\t\t// console.log(\r\n\t\t\t// \t'dataWithNames.data.results',\r\n\t\t\t// \tdataWithNames.data.results\r\n\t\t\t// );\r\n\t\t\tdataWithNames.data.results.sort(\r\n\t\t\t\t(a, b) => a.episode_id - b.episode_id\r\n\t\t\t);\r\n\t\t\t// console.log(\r\n\t\t\t// \t'dataWithNames.data.results',\r\n\t\t\t// \tdataWithNames.data.results\r\n\t\t\t// );\r\n\t\t\tresolve(dataWithNames);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport default apiController;\r\n","import React from 'react';\r\nimport './Detail.css';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nfunction handleValue(val) {\r\n\t// Handle strings & numbers\r\n\tif (typeof val === 'string' || typeof val === 'number') {\r\n\t\treturn val;\r\n\t}\r\n\r\n\t// Handle arrays\r\n\tif (Array.isArray(val)) {\r\n\t\tconst vals = [];\r\n\r\n\t\tlet item;\r\n\t\tfor (item of val) {\r\n\t\t\tvals.push(handleValue(item));\r\n\t\t}\r\n\r\n\t\treturn <div>{vals.map((k) => <div key={uuid()}>{k}</div>)}</div>;\r\n\t}\r\n\r\n\t// Handle all other types\r\n\treturn JSON.stringify(val);\r\n}\r\n\r\nconst Detail = (props) => {\r\n\tconst detailObj = props.detail;\r\n\r\n\treturn (\r\n\t\t<div className=\"detail-box\">\r\n\t\t\t<h2>{detailObj['name']}</h2>\r\n\t\t\t<div className=\"columnsBox\">\r\n\t\t\t\t<div className=\"columns\">\r\n\t\t\t\t\t{detailObj &&\r\n\t\t\t\t\t\tObject.keys(detailObj).map((key) => (\r\n\t\t\t\t\t\t\t<div key={uuid()} className=\"keyValBox\">\r\n\t\t\t\t\t\t\t\t<div className=\"col detailKey\">{key}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col detailValue\">\r\n\t\t\t\t\t\t\t\t\t{handleValue(detailObj[key])}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Detail;\r\n","import React from 'react';\r\n\r\nimport './Loader.css';\r\n\r\nimport ligthsaber from '../../../img/lightsaber_blue2.png';\r\n\r\nconst Loader = () => (\r\n\t<div className=\"loader-box\">\r\n\t\t<img className=\"lightsaber\" src={ligthsaber} alt=\"Lightsaber blue\" />\r\n\t</div>\r\n);\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport './Error.css';\r\n\r\nconst Error = ({ errorDisplay, resetAction }) => {\r\n\treturn (\r\n\t\t<div className=\"error\">\r\n\t\t\t<div>Encountered an error:</div>\r\n\t\t\t<div>{`${errorDisplay}`}</div>\r\n\t\t\t<button className=\"reset-button\" onClick={resetAction}>\r\n\t\t\t\tContinue\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Error;\r\n","import React from 'react';\r\n\r\nconst PageLinks = ({ linksArray }) => {\r\n\treturn (\r\n\t\t<div className=\"links\">\r\n\t\t\t{linksArray.map((link) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={link.key}\r\n\t\t\t\t\tclassName=\"page-link\"\r\n\t\t\t\t\tonClick={link.clickHandler}\r\n\t\t\t\t\tstyle={{ color: link.matchColor }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{link.display}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageLinks;\r\n","import React from 'react';\r\nimport './List.css';\r\n\r\nconst List = ({ list }) => {\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{list.map((item) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item.id}>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"list-item\"\r\n\t\t\t\t\t\t\tonClick={item.clickHandler}\r\n\t\t\t\t\t\t\tstyle={{ color: `${item.color}` }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{item.display}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React from 'react';\r\nimport Loader from '../Loader/Loader';\r\nimport Error from '../Error/Error';\r\nimport PageLinks from '../PageLinks/PageLinks';\r\nimport List from '../List/List';\r\nimport './Results.css';\r\n\r\nimport constants from '../../../constants.json';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nconst Results = (props) => {\r\n\tconst {\r\n\t\tdata,\r\n\t\tcount,\r\n\t\tpage,\r\n\t\tfetching,\r\n\t\terror,\r\n\t\tsetError,\r\n\t\tterm,\r\n\t\tshowDetailHandler,\r\n\t\tsearchHandler,\r\n\t\tdetail\r\n\t} = props;\r\n\r\n\tconst renderPageLinks = (linkCount) => {\r\n\t\tlet linksArray = [];\r\n\r\n\t\tconst linkPagesNeeded = Math.ceil(linkCount / 10) || 1;\r\n\r\n\t\tfor (let i = 1; i <= linkPagesNeeded; i++) {\r\n\t\t\tlinksArray.push({\r\n\t\t\t\tkey: uuid(),\r\n\t\t\t\tdisplay: i,\r\n\t\t\t\tsearchTerm: term,\r\n\t\t\t\tmatchColor: i === page && constants.SW_COLOR,\r\n\t\t\t\tclickHandler: () =>\r\n\t\t\t\t\tsearchHandler({\r\n\t\t\t\t\t\tsearchPage: i,\r\n\t\t\t\t\t\tsearchTerm: term\r\n\t\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <PageLinks linksArray={linksArray} />;\r\n\t};\r\n\r\n\tconst renderError = () => (\r\n\t\t<Error errorDisplay={error} resetAction={() => setError('')} />\r\n\t);\r\n\r\n\tconst renderFetching = () => <Loader />;\r\n\r\n\tconst renderList = () => {\r\n\t\tconst listExtended = data.results.map((item) => {\r\n\t\t\tconst id = uuid();\r\n\t\t\tconst clickHandler = () => showDetailHandler(item.name);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\tdisplay: item.name,\r\n\t\t\t\tclickHandler: clickHandler,\r\n\t\t\t\tcolor: `${item.name === detail.name && constants.SW_COLOR}`\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn <List list={listExtended} />;\r\n\t};\r\n\r\n\tconst renderContent = () => (\r\n\t\t<div className=\"content\">\r\n\t\t\t{data.results && (\r\n\t\t\t\t<div className=\"results-heading\">\r\n\t\t\t\t\t<h2>{term[0].toUpperCase() + term.slice(1)}</h2>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className=\"results-items\">\r\n\t\t\t\t{fetching && renderFetching()}\r\n\t\t\t\t{!fetching && data.results && renderList()}\r\n\t\t\t</div>\r\n\r\n\t\t\t{data.results && (\r\n\t\t\t\t<div className=\"page-links\">{renderPageLinks(count)}</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderResults = () => {\r\n\t\tif (error) {\r\n\t\t\treturn renderError();\r\n\t\t} else {\r\n\t\t\treturn renderContent();\r\n\t\t}\r\n\t};\r\n\r\n\treturn <div className=\"results\">{renderResults()}</div>;\r\n};\r\n\r\nexport default Results;\r\n","import React, { useState } from 'react';\nimport apiController, { categories } from '../helpers/apiController';\nimport Detail from '../Detail/Detail';\nimport Results from '../Results/Results';\nimport Loader from '../Loader/Loader';\n\nimport starWarsLogo from '../../../img/Star_Wars_Logo.svg';\nimport './V1.css';\n\nconst uuid = require('uuid/v4');\n\nfunction V1() {\n\tconst [ data, setData ] = useState([]);\n\tconst [ count, setCount ] = useState(0);\n\tconst [ page, setPage ] = useState(1);\n\tconst [ detail, setDetail ] = useState({});\n\tconst [ fetching, setFetching ] = useState(false);\n\tconst [ error, setError ] = useState('');\n\tconst [ term, setTerm ] = useState('');\n\n\tconst handleSearch = async (params) => {\n\t\tconst { searchTerm, searchPage } = params;\n\t\tsetFetching(true);\n\n\t\ttry {\n\t\t\tconst data = await apiController(params);\n\t\t\tif (searchTerm !== undefined) {\n\t\t\t\tsetTerm(searchTerm);\n\t\t\t}\n\n\t\t\tif (data.hasOwnProperty('data')) {\n\t\t\t\tsetData(data.data);\n\n\t\t\t\tif (searchPage !== undefined) {\n\t\t\t\t\tsetPage(searchPage);\n\t\t\t\t}\n\n\t\t\t\tif (data.data.hasOwnProperty('count')) {\n\t\t\t\t\tsetCount(data.data.count);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (data.hasOwnProperty('error')) {\n\t\t\t\tsetError(data.error.toString());\n\t\t\t}\n\t\t\tsetFetching(false);\n\t\t} catch (error) {\n\t\t\tconst errStr = JSON.stringify(error);\n\t\t\tsetError(errStr);\n\t\t}\n\t};\n\n\tfunction showDetail(name) {\n\t\tlet res;\n\t\tfor (res of data.results) {\n\t\t\tif (res.name === name) {\n\t\t\t\tsetDetail(res);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"v1\">\n\t\t\t<header>\n\t\t\t\t<div className=\"star-wars\">\n\t\t\t\t\t<img src={starWarsLogo} alt=\"Star Wars Logo\" />\n\t\t\t\t</div>\n\n\t\t\t\t{categories.map((cat) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"search-button\"\n\t\t\t\t\t\tkey={uuid()}\n\t\t\t\t\t\tid={cat}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\thandleSearch({ searchTerm: cat, searchPage: 1 })}\n\t\t\t\t\t\tstyle={{ color: `${cat === term && '#ffe82f'}` }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${cat[0].toUpperCase()}${cat.slice(1)}`}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</header>\n\t\t\t<div className=\"fetch-content\">\n\t\t\t\t{fetching && !data.results ? (\n\t\t\t\t\t<div className=\"loader-wrapper\">\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Results\n\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\tcount={count}\n\t\t\t\t\t\t\tpage={page}\n\t\t\t\t\t\t\tfetching={fetching}\n\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\tterm={term}\n\t\t\t\t\t\t\tshowDetailHandler={showDetail}\n\t\t\t\t\t\t\tsearchHandler={handleSearch}\n\t\t\t\t\t\t\tsetError={setError}\n\t\t\t\t\t\t\tdetail={detail}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{JSON.stringify(detail) !== '{}' && (\n\t\t\t\t\t\t\t<Detail detail={detail} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default V1;\n","function memoize(fn) {\r\n\tconst cache = {};\r\n\treturn async function(...args) {\r\n\t\tif (cache[args] && !cache[args].hasOwnProperty('error')) {\r\n\t\t\treturn cache[args];\r\n\t\t}\r\n\r\n\t\tconst result = await fn.apply(this, args);\r\n\t\tcache[args] = result;\r\n\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nfunction checkResponse(resp) {\r\n\tif (!resp.ok) {\r\n\t\tconst { status, statusText } = resp;\r\n\t\tconst errorToReturn = new Error();\r\n\t\terrorToReturn.name = `${status}`;\r\n\t\terrorToReturn.message = `${statusText}`;\r\n\r\n\t\tthrow errorToReturn;\r\n\t}\r\n\treturn resp;\r\n}\r\n\r\nasync function fetchAPI(param) {\r\n\ttry {\r\n\t\tconst headers = new Headers();\r\n\t\theaders.append('Content-type', 'application/json');\r\n\t\theaders.append('Accept', 'application/json');\r\n\r\n\t\tconst resp = await fetch(param, { headers });\r\n\t\tconst checkedResp = await checkResponse(resp);\r\n\t\tconst json = await checkedResp.json();\r\n\r\n\t\treturn { data: json };\r\n\t} catch (error) {\r\n\t\treturn { error };\r\n\t}\r\n}\r\n\r\nexport const memoizedFetch = memoize(fetchAPI);\r\n","import { useEffect, useState } from 'react';\r\nimport { memoizedFetch } from '../helpers/api';\r\n\r\nconst BASE_URL = 'https://swapi.co/api/';\r\n\r\nconst categories = [\r\n\t'films',\r\n\t'people',\r\n\t'planets',\r\n\t'species',\r\n\t'starships',\r\n\t'vehicles'\r\n];\r\n\r\nconst useSwApi = () => {\r\n\tconst [ data, setData ] = useState({});\r\n\tconst [ isFetching, setIsFetching ] = useState(false);\r\n\tconst [ error, setError ] = useState('');\r\n\tconst [ term, setTerm ] = useState('');\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ detail, setDetail ] = useState({});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tfunction dataReducer(prev, dataToReduce) {\r\n\t\t\t\tlet termObject = {};\r\n\r\n\t\t\t\tif (prev.hasOwnProperty(term)) {\r\n\t\t\t\t\ttermObject = { ...prev[term] };\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttermObject = { count: dataToReduce.data.count };\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\t[term]: {\r\n\t\t\t\t\t\t...termObject,\r\n\t\t\t\t\t\t[page]: dataToReduce.data.results\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleResults(data) {\r\n\t\t\t\tlet results = data.data.results;\r\n\r\n\t\t\t\tif (results[0].hasOwnProperty('name') && term !== 'films') {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet dataWithNames = JSON.parse(JSON.stringify(data));\r\n\t\t\t\t\tdataWithNames.data.results = [];\r\n\r\n\t\t\t\t\tlet item;\r\n\t\t\t\t\tfor (item of results) {\r\n\t\t\t\t\t\titem['name'] = item.title;\r\n\t\t\t\t\t\tdataWithNames.data.results.push(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataWithNames.data.results.sort(\r\n\t\t\t\t\t\t(a, b) => a.episode_id - b.episode_id\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn dataWithNames;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst fetchData = async () => {\r\n\t\t\t\tsetError('');\r\n\t\t\t\tsetIsFetching(true);\r\n\r\n\t\t\t\tconst url = `${BASE_URL}${term}/?page=${page}`;\r\n\r\n\t\t\t\tconst config = {\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAccept: 'application/json, text/plain, */*'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = await memoizedFetch(url, config);\r\n\t\t\t\t\tconst dataToSet = handleResults(data);\r\n\r\n\t\t\t\t\tsetData((prev) => dataReducer(prev, dataToSet));\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tsetError(JSON.stringify(error));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetIsFetching(false);\r\n\t\t\t};\r\n\r\n\t\t\t// Check that the data is not present already\r\n\t\t\tif (data.hasOwnProperty(term) && data[term].hasOwnProperty(page)) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t// If not, fetch it\r\n\t\t\t\tif (term && page) fetchData();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ term, page, data ]\r\n\t);\r\n\r\n\treturn [\r\n\t\t{ categories, data, isFetching, error, term, page, detail },\r\n\t\t{ setIsFetching, setError, setTerm, setPage, setDetail }\r\n\t];\r\n};\r\n\r\nexport default useSwApi;\r\n\r\n// {\r\n// \tfilms<term>: {\r\n// \t\tcount: 7,\r\n// \t\tnext: ?,\r\n// \t\tprevious: ?,\r\n// \t\t1<page>: [\r\n// \t\t\t{},\r\n// \t\t\t{},\r\n// \t\t\t...\r\n// \t\t]\r\n// \t},\r\n// \tpeople<term>: {\r\n// \t\tcount: 87,\r\n// \t\tnext: ?,\r\n// \t\tprevious: ?,\r\n// \t\t1<page>: [\r\n// \t\t\t{},\r\n// \t\t\t{},\r\n// \t\t\t...\r\n// \t\t]\r\n// \t}\r\n// }\r\n","import React from 'react';\r\nimport { capitalize, removeUnderscores } from '../helpers/textHelpers';\r\nimport './Detail.css';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nconst formatText = (str) => {\r\n\tlet retStr = removeUnderscores(str);\r\n\treturn capitalize(retStr);\r\n};\r\n\r\nconst getRenderObj = (inObj) => {\r\n\tconst outObj = {\r\n\t\tname: '',\r\n\t\tsingles: {},\r\n\t\tlists: {},\r\n\t\ttechnical: {}\r\n\t};\r\n\r\n\tconst technicalKeys = [ 'created', 'edited', 'url' ];\r\n\r\n\tObject.keys(inObj).forEach((item) => {\r\n\t\tif (item === 'name') {\r\n\t\t\toutObj[item] = inObj[item];\r\n\t\t} else if (technicalKeys.includes(item)) {\r\n\t\t\toutObj.technical[item] = inObj[item];\r\n\t\t} else if (Array.isArray(inObj[item])) {\r\n\t\t\toutObj.lists[item] = inObj[item];\r\n\t\t} else {\r\n\t\t\toutObj.singles[item] = inObj[item];\r\n\t\t}\r\n\t});\r\n\r\n\treturn outObj;\r\n};\r\n\r\nconst renderLists = (inObj) => {\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{Object.keys(inObj).map((objKey) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tinObj[objKey].length > 0 && (\r\n\t\t\t\t\t\t<div key={uuid()} className=\"v2ListBox\">\r\n\t\t\t\t\t\t\t<div className=\"v2detailKey\">\r\n\t\t\t\t\t\t\t\t{formatText(objKey)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{inObj[objKey].map((item) => (\r\n\t\t\t\t\t\t\t\t<div key={uuid()} className=\"v2detailValue\">\r\n\t\t\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nconst renderSingles = (inObj) => {\r\n\treturn Object.keys(inObj).map((k) => {\r\n\t\treturn (\r\n\t\t\t<div key={uuid()} className=\"v2keyValBox\">\r\n\t\t\t\t<div className=\"v2detailKey\">{formatText(k)}:</div>\r\n\t\t\t\t<div className=\"v2detailValue\">{inObj[k]}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t});\r\n};\r\n\r\nconst Detail = (props) => {\r\n\tconst detailObj = props.detail;\r\n\r\n\tconst { name, singles, lists } = getRenderObj(detailObj);\r\n\r\n\treturn (\r\n\t\t<div className=\"v2detail-box\">\r\n\t\t\t<h2>{name}</h2>\r\n\t\t\t{singles && renderSingles(singles)}\r\n\t\t\t{lists && renderLists(lists)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Detail;\r\n","export const capitalize = (str) => {\r\n\treturn str\r\n\t\t.split(' ')\r\n\t\t.map((word) => {\r\n\t\t\treturn `${word[0].toUpperCase()}${word.slice(1)}`;\r\n\t\t})\r\n\t\t.join(' ');\r\n};\r\n\r\nexport const removeUnderscores = (str) => str.replace('_', ' ');\r\n","import React from 'react';\r\n\r\nimport './Loader.css';\r\n\r\nimport ligthsaber from '../../../img/lightsaber_blue2.png';\r\n\r\nconst Loader = () => (\r\n\t<div className=\"loader-box\">\r\n\t\t<img className=\"lightsaber\" src={ligthsaber} alt=\"Lightsaber blue\" />\r\n\t</div>\r\n);\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport './Error.css';\r\n\r\nconst Error = ({ errorDisplay, resetAction }) => {\r\n\treturn (\r\n\t\t<div className=\"error\">\r\n\t\t\t<div>Encountered an error:</div>\r\n\t\t\t<div>{`${errorDisplay}`}</div>\r\n\t\t\t<button className=\"reset-button\" onClick={resetAction}>\r\n\t\t\t\tContinue\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Error;\r\n","import React from 'react';\r\n\r\nconst PageLinks = ({ linksArray }) => {\r\n\treturn (\r\n\t\t<div className=\"links\">\r\n\t\t\t{linksArray.map((link) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={link.key}\r\n\t\t\t\t\tclassName=\"page-link\"\r\n\t\t\t\t\tonClick={link.clickHandler}\r\n\t\t\t\t\tstyle={{ color: link.matchColor }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{link.display}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageLinks;\r\n","import React from 'react';\r\nimport './List.css';\r\n\r\nconst List = ({ list }) => {\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{list.map((item) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item.id}>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"list-item\"\r\n\t\t\t\t\t\t\tonClick={item.clickHandler}\r\n\t\t\t\t\t\t\tstyle={{ color: `${item.color}` }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{item.display}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React from 'react';\r\nimport Loader from '../Loader/Loader';\r\nimport Error from '../Error/Error';\r\nimport PageLinks from '../PageLinks/PageLinks';\r\nimport List from '../List/List';\r\nimport './Results.css';\r\n\r\nimport constants from '../../../constants.json';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nconst Results = (props) => {\r\n\tconst {\r\n\t\tdata,\r\n\t\tpage,\r\n\t\tfetching,\r\n\t\terror,\r\n\t\tsetError,\r\n\t\tterm,\r\n\t\tshowDetailHandler,\r\n\t\tsearchHandler,\r\n\t\tdetail\r\n\t} = props;\r\n\r\n\tconst renderPageLinks = (linkCount) => {\r\n\t\tlet linksArray = [];\r\n\r\n\t\tconst linkPagesNeeded = Math.ceil(linkCount / 10) || 1;\r\n\r\n\t\tfor (let i = 1; i <= linkPagesNeeded; i++) {\r\n\t\t\tlinksArray.push({\r\n\t\t\t\tkey: uuid(),\r\n\t\t\t\tdisplay: i,\r\n\t\t\t\tsearchTerm: term,\r\n\t\t\t\tmatchColor: i === page && constants.SW_COLOR,\r\n\t\t\t\tclickHandler: () =>\r\n\t\t\t\t\tsearchHandler({\r\n\t\t\t\t\t\tsearchPage: i,\r\n\t\t\t\t\t\tsearchTerm: term\r\n\t\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <PageLinks linksArray={linksArray} />;\r\n\t};\r\n\r\n\tconst renderError = () => (\r\n\t\t<Error errorDisplay={error} resetAction={() => setError('')} />\r\n\t);\r\n\r\n\tconst renderFetching = () => <Loader />;\r\n\r\n\tconst renderList = () => {\r\n\t\tconst listExtended = data[term][page].map((item) => {\r\n\t\t\tconst id = uuid();\r\n\t\t\tconst clickHandler = () => showDetailHandler(item.name);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\tdisplay: item.name,\r\n\t\t\t\tclickHandler: clickHandler,\r\n\t\t\t\tcolor: `${item.name === detail.name && constants.SW_COLOR}`\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn <List list={listExtended} />;\r\n\t};\r\n\r\n\tconst renderContent = () => {\r\n\t\tconst isData =\r\n\t\t\tObject.keys(data).length > 0 &&\r\n\t\t\tdata.hasOwnProperty(term) &&\r\n\t\t\tdata[term].hasOwnProperty(page);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"content\">\r\n\t\t\t\t{isData && (\r\n\t\t\t\t\t<div className=\"results-heading\">\r\n\t\t\t\t\t\t<h2>{term[0].toUpperCase() + term.slice(1)}</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className=\"results-items\">\r\n\t\t\t\t\t{fetching && renderFetching()}\r\n\t\t\t\t\t{!fetching && isData && renderList()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{isData && (\r\n\t\t\t\t\t<div className=\"page-links\">\r\n\t\t\t\t\t\t{renderPageLinks(data[term].count)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderResults = () => {\r\n\t\tif (error) {\r\n\t\t\treturn renderError();\r\n\t\t} else {\r\n\t\t\treturn renderContent();\r\n\t\t}\r\n\t};\r\n\r\n\treturn <div className=\"results\">{renderResults()}</div>;\r\n};\r\n\r\nexport default Results;\r\n","import React from 'react';\nimport useSwApi from '../hooks/useSwApi';\nimport Detail from '../Detail/Detail';\nimport Results from '../Results/Results';\nimport Loader from '../Loader/Loader';\n\nimport starWarsLogo from '../../../img/Star_Wars_Logo.svg';\nimport appConstants from '../../../constants.json';\nimport './V2.css';\n\nconst uuid = require('uuid/v4');\n\nfunction V2(props) {\n\tconst [\n\t\t{ categories, data, isFetching, error, term, page, count, detail },\n\t\t{ setTerm, setPage, setError, setDetail }\n\t] = useSwApi();\n\n\tconst { setVersion } = props;\n\n\tconst handleSearch = async (params) => {\n\t\tconst { searchTerm, searchPage } = params;\n\t\tsetTerm(searchTerm);\n\t\tsetPage(searchPage);\n\t};\n\n\tfunction showDetail(name) {\n\t\tlet res;\n\t\tfor (res of data[term][page]) {\n\t\t\tif (res.name === name) {\n\t\t\t\tsetDetail(res);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"v2\">\n\t\t\t<header>\n\t\t\t\t<div className=\"star-wars\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={starWarsLogo}\n\t\t\t\t\t\talt=\"Star Wars Logo\"\n\t\t\t\t\t\tonClick={(e) => setVersion('0')}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{categories.map((cat) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"search-button\"\n\t\t\t\t\t\tkey={uuid()}\n\t\t\t\t\t\tid={cat}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\thandleSearch({ searchTerm: cat, searchPage: 1 })}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: `${cat === term && appConstants.SW_COLOR}`\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${cat[0].toUpperCase()}${cat.slice(1)}`}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</header>\n\t\t\t<div className=\"fetch-content\">\n\t\t\t\t{isFetching && !data.results ? (\n\t\t\t\t\t<div className=\"loader-wrapper\">\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Results\n\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\tcount={count}\n\t\t\t\t\t\t\tpage={page}\n\t\t\t\t\t\t\tfetching={isFetching}\n\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\tterm={term}\n\t\t\t\t\t\t\tshowDetailHandler={showDetail}\n\t\t\t\t\t\t\tsearchHandler={handleSearch}\n\t\t\t\t\t\t\tsetError={setError}\n\t\t\t\t\t\t\tdetail={detail}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{JSON.stringify(detail) !== '{}' && (\n\t\t\t\t\t\t\t<Detail detail={detail} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default V2;\n","function memoize(fn) {\r\n\tconst cache = {};\r\n\treturn async function(...args) {\r\n\t\tif (cache[args] && !cache[args].hasOwnProperty('error')) {\r\n\t\t\treturn cache[args];\r\n\t\t}\r\n\r\n\t\tconst result = await fn.apply(this, args);\r\n\t\tcache[args] = result;\r\n\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nfunction checkResponse(resp) {\r\n\tif (!resp.ok) {\r\n\t\tconst { status, statusText } = resp;\r\n\t\tconst errorToReturn = new Error();\r\n\t\terrorToReturn.name = `${status}`;\r\n\t\terrorToReturn.message = `${statusText}`;\r\n\r\n\t\tthrow errorToReturn;\r\n\t}\r\n\treturn resp;\r\n}\r\n\r\nasync function fetchAPI(param) {\r\n\ttry {\r\n\t\tconst headers = new Headers();\r\n\t\theaders.append('Content-type', 'application/json');\r\n\t\theaders.append('Accept', 'application/json');\r\n\r\n\t\tconst resp = await fetch(param, { headers });\r\n\t\tconst checkedResp = await checkResponse(resp);\r\n\t\tconst json = await checkedResp.json();\r\n\r\n\t\treturn { data: json };\r\n\t} catch (error) {\r\n\t\treturn { error };\r\n\t}\r\n}\r\n\r\nexport const memoizedFetch = memoize(fetchAPI);\r\n","import { useEffect, useState } from 'react';\r\nimport { memoizedFetch } from '../helpers/api';\r\n\r\nconst BASE_URL = 'https://swapi.co/api/';\r\n\r\nconst categories = [\r\n\t'films',\r\n\t'people',\r\n\t'planets',\r\n\t'species',\r\n\t'starships',\r\n\t'vehicles'\r\n];\r\n\r\nconst useSwApi = () => {\r\n\tconst [ data, setData ] = useState({});\r\n\tconst [ isFetching, setIsFetching ] = useState(false);\r\n\tconst [ error, setError ] = useState('');\r\n\tconst [ term, setTerm ] = useState('');\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ detail, setDetail ] = useState({});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tfunction handleResults(data) {\r\n\t\t\t\tconsole.log('data', data);\r\n\t\t\t\tlet results = data.data.results;\r\n\r\n\t\t\t\tif (results[0].hasOwnProperty('name') && term !== 'films') {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet dataWithNames = JSON.parse(JSON.stringify(data));\r\n\t\t\t\t\tdataWithNames.data.results = [];\r\n\r\n\t\t\t\t\tlet item;\r\n\t\t\t\t\tfor (item of results) {\r\n\t\t\t\t\t\titem['name'] = item.title;\r\n\t\t\t\t\t\tdataWithNames.data.results.push(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataWithNames.data.results.sort(\r\n\t\t\t\t\t\t(a, b) => a.episode_id - b.episode_id\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn dataWithNames;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction dataReducer(prev, dataToReduce) {\r\n\t\t\t\tlet termObject = {};\r\n\r\n\t\t\t\tif (prev.hasOwnProperty(term)) {\r\n\t\t\t\t\ttermObject = { ...prev[term] };\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttermObject = { count: dataToReduce.data.count };\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\t[term]: {\r\n\t\t\t\t\t\t...termObject,\r\n\t\t\t\t\t\t[page]: dataToReduce.data.results\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tconst fetchData = async () => {\r\n\t\t\t\tsetError('');\r\n\t\t\t\tsetIsFetching(true);\r\n\r\n\t\t\t\tconst url = `${BASE_URL}${term}/?page=${page}`;\r\n\r\n\t\t\t\tconst config = {\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAccept: 'application/json, text/plain, */*'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = await memoizedFetch(url, config);\r\n\t\t\t\t\tconsole.log('data', data);\r\n\t\t\t\t\tconst dataToSet = handleResults(data);\r\n\t\t\t\t\t// console.log('dataToSet', dataToSet)\r\n\t\t\t\t\t// const preparedData = prepareData(dataToSet)\r\n\r\n\t\t\t\t\tsetData((prev) => dataReducer(prev, dataToSet));\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tsetError(JSON.stringify(error));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetIsFetching(false);\r\n\t\t\t};\r\n\r\n\t\t\t// Check that the data is not present already\r\n\t\t\tif (data.hasOwnProperty(term) && data[term].hasOwnProperty(page)) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t// If not, fetch it\r\n\t\t\t\tif (term && page) fetchData();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ term, page, data ]\r\n\t);\r\n\r\n\treturn [\r\n\t\t{ categories, data, isFetching, error, term, page, detail },\r\n\t\t{ setIsFetching, setError, setTerm, setPage, setDetail }\r\n\t];\r\n};\r\n\r\nexport default useSwApi;\r\n","import React from 'react';\r\nimport { capitalize, removeUnderscores } from '../helpers/textHelpers';\r\nimport './Detail.css';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nconst formatText = (str) => {\r\n\tlet retStr = removeUnderscores(str);\r\n\treturn capitalize(retStr);\r\n};\r\n\r\nconst formatValue = (str) => {\r\n\tif (\r\n\t\t!Number.isNaN(Number.parseFloat(str, 10)) &&\r\n\t\tNumber.parseFloat(str, 10).toString() === str\r\n\t) {\r\n\t\t// console.log('str', str);\r\n\t\treturn Number.parseFloat(str, 10).toLocaleString();\r\n\t}\r\n\treturn str;\r\n};\r\n\r\nconst getRenderObj = (inObj) => {\r\n\t// console.log('inObj', inObj);\r\n\tconst outObj = {\r\n\t\tname: '',\r\n\t\tsingles: {},\r\n\t\tlists: {},\r\n\t\ttechnical: {},\r\n\t\tcrawl: {}\r\n\t};\r\n\r\n\tconst technicalKeys = [ 'created', 'edited', 'url' ];\r\n\r\n\tconst getDisplayItem = (val) => {\r\n\t\t// val has been checked and is a url\r\n\t\tlet termAndId = val.replace('https://swapi.co/api/', '').split('/');\r\n\r\n\t\tconst [ term, id ] = termAndId;\r\n\r\n\t\treturn {\r\n\t\t\tterm: term,\r\n\t\t\tid: id,\r\n\t\t\tpage: getPage(id)\r\n\t\t};\r\n\t};\r\n\r\n\tconst getPage = (num) => {\r\n\t\treturn Math.ceil(num / 10);\r\n\t};\r\n\r\n\tconst getIsUrl = (val) => {\r\n\t\tif (!(typeof val === 'string')) {\r\n\t\t\t// console.warn('val not string: ', val);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn val.includes('https://swapi.co/api/') ? true : false;\r\n\t};\r\n\r\n\tObject.keys(inObj).forEach((item) => {\r\n\t\tif (item === 'name') {\r\n\t\t\toutObj[item] = inObj[item];\r\n\t\t} else if (item === 'opening_crawl') {\r\n\t\t\t// console.log('inObj', inObj);\r\n\t\t\toutObj['crawl'] = { [item]: inObj[item] };\r\n\t\t} else if (technicalKeys.includes(item)) {\r\n\t\t\toutObj.technical[item] = inObj[item];\r\n\t\t} else if (Array.isArray(inObj[item])) {\r\n\t\t\toutObj.lists[item] = inObj[item].map((val) => {\r\n\t\t\t\tif (getIsUrl(val)) {\r\n\t\t\t\t\treturn getDisplayItem(val);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (getIsUrl(inObj[item])) {\r\n\t\t\t\toutObj.singles[item] = getDisplayItem(inObj[item]);\r\n\t\t\t} else {\r\n\t\t\t\toutObj.singles[item] = inObj[item];\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn outObj;\r\n};\r\n\r\nconst renderCrawl = (inObj) => {\r\n\treturn (\r\n\t\t<div className=\"v3-columns-box crawl\">\r\n\t\t\t<div className=\"v3-left\">\r\n\t\t\t\t{Object.keys(inObj).map((singlesKey) => (\r\n\t\t\t\t\t<div key={uuid()} className=\"v3-single-key\">\r\n\t\t\t\t\t\t{formatText(singlesKey)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"v3-right\">\r\n\t\t\t\t{Object.keys(inObj).map((singlesKey) => (\r\n\t\t\t\t\t<div key={uuid()} className=\"v3-single-value\">\r\n\t\t\t\t\t\t{typeof inObj[singlesKey] === 'string' ? (\r\n\t\t\t\t\t\t\tinObj[singlesKey]\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst renderSingles = (inObj) => {\r\n\treturn (\r\n\t\t<div className=\"v3-columns-box\">\r\n\t\t\t<div className=\"v3-left\">\r\n\t\t\t\t{Object.keys(inObj).map((singlesKey) => (\r\n\t\t\t\t\t<div key={uuid()} className=\"v3-single-key\">\r\n\t\t\t\t\t\t{formatText(singlesKey)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"v3-right\">\r\n\t\t\t\t{Object.keys(inObj).map((singlesKey) => (\r\n\t\t\t\t\t<div key={uuid()} className=\"v3-single-value\">\r\n\t\t\t\t\t\t{typeof inObj[singlesKey] === 'string' ||\r\n\t\t\t\t\t\ttypeof inObj[singlesKey] === 'number' ? (\r\n\t\t\t\t\t\t\tformatValue(inObj[singlesKey])\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Detail = (props) => {\r\n\tconst detailObj = props.detail;\r\n\r\n\tconst { name, singles, crawl } = getRenderObj(detailObj);\r\n\r\n\treturn (\r\n\t\t<div className=\"v3-detail-box\">\r\n\t\t\t<h2>{name}</h2>\r\n\t\t\t{singles && renderSingles(singles)}\r\n\t\t\t{crawl && renderCrawl(crawl)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Detail;\r\n","export const capitalize = (str) => {\r\n\treturn str\r\n\t\t.split(' ')\r\n\t\t.map((word) => {\r\n\t\t\treturn `${word[0].toUpperCase()}${word.slice(1)}`;\r\n\t\t})\r\n\t\t.join(' ');\r\n};\r\n\r\nexport const removeUnderscores = (str) => str.replace(/_/g, ' ');\r\n","import React from 'react';\r\n\r\nimport './Loader.css';\r\n\r\nimport ligthsaber from '../../../img/lightsaber_blue2.png';\r\n\r\nconst Loader = () => (\r\n\t<div className=\"loader-box\">\r\n\t\t<img className=\"lightsaber\" src={ligthsaber} alt=\"Lightsaber blue\" />\r\n\t</div>\r\n);\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport './Error.css';\r\n\r\nconst Error = ({ errorDisplay, resetAction }) => {\r\n\treturn (\r\n\t\t<div className=\"error\">\r\n\t\t\t<div>Encountered an error:</div>\r\n\t\t\t<div>{`${errorDisplay}`}</div>\r\n\t\t\t<button className=\"reset-button\" onClick={resetAction}>\r\n\t\t\t\tContinue\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Error;\r\n","import React from 'react';\r\n\r\nconst PageLinks = ({ linksArray }) => {\r\n\treturn (\r\n\t\t<div className=\"links\">\r\n\t\t\t{linksArray.map((link) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={link.key}\r\n\t\t\t\t\tclassName=\"page-link\"\r\n\t\t\t\t\tonClick={link.clickHandler}\r\n\t\t\t\t\tstyle={{ color: link.matchColor }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{link.display}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageLinks;\r\n","import React from 'react';\r\nimport './List.css';\r\n\r\nconst List = ({ list }) => {\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{list.map((item) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item.id}>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"list-item\"\r\n\t\t\t\t\t\t\tonClick={item.clickHandler}\r\n\t\t\t\t\t\t\tstyle={{ color: `${item.color}` }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{item.display}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React from 'react';\r\nimport Loader from '../Loader/Loader';\r\nimport Error from '../Error/Error';\r\nimport PageLinks from '../PageLinks/PageLinks';\r\nimport List from '../List/List';\r\nimport './Results.css';\r\n\r\nimport constants from '../../../constants.json';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nconst Results = (props) => {\r\n\tconst {\r\n\t\tdata,\r\n\t\tpage,\r\n\t\tfetching,\r\n\t\terror,\r\n\t\tsetError,\r\n\t\tterm,\r\n\t\tshowDetailHandler,\r\n\t\tsearchHandler,\r\n\t\tdetail\r\n\t} = props;\r\n\r\n\tconst renderPageLinks = (linkCount) => {\r\n\t\tlet linksArray = [];\r\n\r\n\t\tconst linkPagesNeeded = Math.ceil(linkCount / 10) || 1;\r\n\r\n\t\tfor (let i = 1; i <= linkPagesNeeded; i++) {\r\n\t\t\tlinksArray.push({\r\n\t\t\t\tkey: uuid(),\r\n\t\t\t\tdisplay: i,\r\n\t\t\t\tsearchTerm: term,\r\n\t\t\t\tmatchColor: i === page && constants.SW_COLOR,\r\n\t\t\t\tclickHandler: () =>\r\n\t\t\t\t\tsearchHandler({\r\n\t\t\t\t\t\tsearchPage: i,\r\n\t\t\t\t\t\tsearchTerm: term\r\n\t\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <PageLinks linksArray={linksArray} />;\r\n\t};\r\n\r\n\tconst renderError = () => (\r\n\t\t<Error errorDisplay={error} resetAction={() => setError('')} />\r\n\t);\r\n\r\n\tconst renderFetching = () => <Loader />;\r\n\r\n\tconst renderList = () => {\r\n\t\tconst listExtended = data[term][page].map((item) => {\r\n\t\t\tconst id = uuid();\r\n\t\t\tconst clickHandler = () => showDetailHandler(item.name);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\tdisplay: item.name,\r\n\t\t\t\tclickHandler: clickHandler,\r\n\t\t\t\tcolor: `${item.name === detail.name && constants.SW_COLOR}`\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn <List list={listExtended} />;\r\n\t};\r\n\r\n\tconst renderContent = () => {\r\n\t\tconst isData =\r\n\t\t\tObject.keys(data).length > 0 &&\r\n\t\t\tdata.hasOwnProperty(term) &&\r\n\t\t\tdata[term].hasOwnProperty(page);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"content\">\r\n\t\t\t\t{isData && (\r\n\t\t\t\t\t<div className=\"results-heading\">\r\n\t\t\t\t\t\t<h2>{term[0].toUpperCase() + term.slice(1)}</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className=\"results-items\">\r\n\t\t\t\t\t{fetching && renderFetching()}\r\n\t\t\t\t\t{!fetching && isData && renderList()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{isData && (\r\n\t\t\t\t\t<div className=\"page-links\">\r\n\t\t\t\t\t\t{renderPageLinks(data[term].count)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderResults = () => {\r\n\t\tif (error) {\r\n\t\t\treturn renderError();\r\n\t\t} else {\r\n\t\t\treturn renderContent();\r\n\t\t}\r\n\t};\r\n\r\n\treturn <div className=\"results\">{renderResults()}</div>;\r\n};\r\n\r\nexport default Results;\r\n","import React from 'react';\nimport useSwApi from '../hooks/useSwApi';\nimport Detail from '../Detail/Detail';\nimport Results from '../Results/Results';\nimport Loader from '../Loader/Loader';\n\nimport starWarsLogo from '../../../img/Star_Wars_Logo.svg';\nimport appConstants from '../../../constants.json';\nimport './V3.css';\n\nconst uuid = require('uuid/v4');\n\nfunction V2(props) {\n\tconst [\n\t\t{ categories, data, isFetching, error, term, page, count, detail },\n\t\t{ setTerm, setPage, setError, setDetail }\n\t] = useSwApi();\n\n\tconst { setVersion } = props;\n\n\tconst handleSearch = async (params) => {\n\t\tconst { searchTerm, searchPage } = params;\n\t\tsetTerm(searchTerm);\n\t\tsetPage(searchPage);\n\t};\n\n\tfunction showDetail(name) {\n\t\tlet res;\n\t\tfor (res of data[term][page]) {\n\t\t\tif (res.name === name) {\n\t\t\t\tsetDetail(res);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"v3\">\n\t\t\t<header>\n\t\t\t\t<div className=\"star-wars\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={starWarsLogo}\n\t\t\t\t\t\talt=\"Star Wars Logo\"\n\t\t\t\t\t\tonClick={(e) => setVersion('0')}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{categories.map((cat) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"search-button\"\n\t\t\t\t\t\tkey={uuid()}\n\t\t\t\t\t\tid={cat}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\thandleSearch({ searchTerm: cat, searchPage: 1 })}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: `${cat === term && appConstants.SW_COLOR}`\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${cat[0].toUpperCase()}${cat.slice(1)}`}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</header>\n\t\t\t<div className=\"fetch-content\">\n\t\t\t\t{isFetching && !data.results ? (\n\t\t\t\t\t<div className=\"loader-wrapper\">\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Results\n\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\tcount={count}\n\t\t\t\t\t\t\tpage={page}\n\t\t\t\t\t\t\tfetching={isFetching}\n\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\tterm={term}\n\t\t\t\t\t\t\tshowDetailHandler={showDetail}\n\t\t\t\t\t\t\tsearchHandler={handleSearch}\n\t\t\t\t\t\t\tsetError={setError}\n\t\t\t\t\t\t\tdetail={detail}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{JSON.stringify(detail) !== '{}' && (\n\t\t\t\t\t\t\t<Detail detail={detail} data={data} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default V2;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Layer_3\"\n}, React.createElement(\"rect\", {\n  x: -6.084,\n  y: -3.711,\n  width: 700.465,\n  height: 422.979\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Layer_2\"\n}, React.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#FFE81F\",\n  d: \"M148.718,221.207l8.67,25.461c4.691,13.768,8.879,24.779,9.425,24.779c0.009,0,0.017-0.004,0.024-0.01 c0.6-0.53,17.57-49.811,17.57-49.811h32.89l-39.68,115.619h-22.86c0,0-24.4-70.471-24.3-70.739l-25.47,69.851h-22.63 l-39.18-115.15l32.73,0.021c0,0,17.929,50.821,18.168,50.821c0.001,0,0.001-0.001,0.002-0.002l17.89-50.841H148.718 M32.003,213.2 l3.601,10.584l39.18,115.149l1.845,5.424h5.729h22.63h5.598l1.918-5.26l17.685-48.5c1.524,4.434,3.171,9.213,4.818,13.988 c6.089,17.655,12.191,35.277,12.191,35.277l1.864,5.383h5.696h22.86h5.712l1.854-5.403l39.68-115.618l3.637-10.598h-11.204h-32.89 h-5.706l-1.858,5.396c-2.974,8.635-6.921,20.031-10.296,29.676c-0.509-1.463-1.039-3.001-1.587-4.611l-8.669-25.46l-1.846-5.421 h-5.727h-36.75h-5.666l-1.881,5.345l-10.453,29.706c-3.453-9.706-7.456-21.017-10.516-29.691l-1.882-5.334l-5.657-0.004 l-32.73-0.021L32.003,213.2L32.003,213.2z\"\n})), React.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#FFE81F\",\n  d: \"M655.258,220.758l-0.075,30.305c0,0-32.643-0.109-49.239-0.109c-5.521,0-9.266,0.013-9.444,0.045 c-2.86,0.521-4.681,6.602-3.87,9.271c0.399,1.35,3.391,5.76,6.63,9.81c3.229,4.051,8.54,10.681,11.78,14.729 c8.319,10.381,9.46,12.43,10.229,18.391c1.25,9.681-3.329,20.16-11.829,27.07c-8.518,6.93-8.145,6.979-71.383,6.979 c-0.916,0-1.835,0-2.777,0c-38.46-0.01-58.8-0.329-61.761-0.989c-5.26-1.19-13.64-8.03-35.79-29.28 c-7.967-7.636-15.309-14.322-15.686-14.324c-0.01,0-0.015,0.006-0.015,0.016l-0.261,44.579l-35.899-0.159l-0.221-114.98h45.271 h34.79c24.13,0.871,40.46,24.91,37.21,40.24c-0.74,3.479-2.62,8.521-4.181,11.2c-3.21,5.5-11.38,12.56-18.011,15.591 c-2.449,1.108-4.449,2.398-4.449,2.858c0,1.71,8.061,9.649,11.08,10.91c2.579,1.079,10.09,1.319,43.21,1.319 c3.882,0,7.408,0.002,10.608,0.002c33.293,0,31.618-0.24,34.19-5.741c1.801-3.83,0.431-6.12-12.239-20.39 c-16.051-15.971-14.37-23.621-14.48-29.271c-0.229-6.77,5.102-28.069,32.812-28.069L655.258,220.758 M440.188,273.878 c15.37,0,18.49-0.239,21.761-1.66c11.04-4.8,11.63-18.979,1.04-25.271c-2.319-1.381-5.3-1.609-21.96-1.7l-19.279-0.101 c0.159,0.15-0.061,27.57-0.061,27.57S426.518,273.878,440.188,273.878 M663.277,212.758h-8.021h-73.8 c-16.032,0-25.515,6.328-30.646,11.637c-8.347,8.633-10.313,19.504-10.162,24.629c0.008,0.427,0.003,0.865-0.002,1.322 c-0.073,8.329,1.154,17.758,16.659,33.246c3.065,3.452,8.193,9.239,10.131,12.115c-4.238,0.521-14.98,0.521-26.262,0.521h-4.792 l-5.816-0.002c-19.904,0-36.688-0.057-40.128-0.736c-0.481-0.314-1.156-0.854-1.898-1.498c6.877-4.235,13.83-10.799,17.104-16.412 c1.987-3.413,4.178-9.243,5.098-13.568c2.04-9.625-1.325-21.236-9.001-31.068c-8.956-11.471-21.985-18.334-35.746-18.83 l-0.145-0.006h-0.145h-34.79h-45.271h-8.016l0.016,8.017l0.221,114.979l0.016,7.949l7.949,0.035l35.899,0.159l7.988,0.035 l0.047-7.988l0.155-26.706c0.733,0.696,1.491,1.419,2.269,2.165c24.227,23.24,32.359,29.679,39.562,31.308 c1.979,0.441,5.253,1.172,63.523,1.188h2.779c31.546,0,47.38,0,56.799-0.91c10.789-1.043,14.259-3.49,19.461-7.725l0.173-0.141 c10.685-8.687,16.323-21.83,14.715-34.3c-1.048-8.11-3.194-11.479-11.922-22.368l-2.594-3.24 c-3.04-3.799-6.713-8.387-9.175-11.475c-1.986-2.484-3.546-4.689-4.487-6.133c1.236-0.003,2.841-0.005,4.918-0.005 c16.395,0,48.887,0.108,49.213,0.11l8.008,0.026l0.02-8.008l0.075-30.306L663.277,212.758L663.277,212.758z M429.739,265.586 c0.013-2.021,0.025-4.287,0.038-6.557c0.01-2,0.019-4.004,0.022-5.84l11.187,0.058c6.429,0.035,16.103,0.088,17.989,0.623 c2.407,1.461,3.75,3.72,3.604,6.06c-0.08,1.264-0.682,3.588-3.821,4.951c-1.75,0.76-4.54,0.997-18.57,0.997 C435.738,265.878,432.305,265.749,429.739,265.586L429.739,265.586z\"\n})), React.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#FFE81F\",\n  d: \"M312.908,220.287l40.29,115.92l-32.83,0.15l-5.45-17.41l-58.7-0.471l-5.18,17.431l-32.5-0.341 l39.78-115.229L312.908,220.287 M286.507,237.283c-0.083,0.333-5.144,14.219-10.222,28.104c-5.12,14-10.257,28-10.328,28.109 c0,0.001-0.001,0.001,0,0.001l0,0c0,0,0,0,0-0.001c0.136-0.04,18.316-0.08,29.968-0.08c5.453,0,9.475,0.009,9.55,0.029 c0.001,0.004,0.001,0.005,0.001,0.005s0-0.001,0-0.003c0,0,0,0-0.001-0.002C305.271,292.916,286.566,237.959,286.507,237.283 c0.001-0.004,0.001-0.006,0.001-0.006l0,0C286.507,237.277,286.507,237.279,286.507,237.283 M318.595,212.282l-5.693,0.005 l-54.59,0.051l-5.696,0.005l-1.859,5.386l-39.78,115.229l-3.623,10.494l11.102,0.115l32.5,0.341l6.033,0.063l1.719-5.782 l3.466-11.662l46.854,0.375l3.708,11.848l1.765,5.638l5.907-0.026l32.829-0.15l11.195-0.052l-3.676-10.574l-40.29-115.92 L318.595,212.282L318.595,212.282z M277.472,285.424c1.515-4.129,3.556-9.71,6.327-17.289c0.869-2.376,1.664-4.551,2.393-6.545 c0.663,1.956,1.385,4.084,2.169,6.398c0.646,1.906,3.485,10.27,5.92,17.428C287.041,285.416,281.591,285.417,277.472,285.424 L277.472,285.424z\"\n})), React.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#FFE81F\",\n  d: \"M326.488,81.928v28.6h-57.28v87.47h-34.15v-87.54l-66.86,0.19c-8.06,0-9.14,6.42-9.14,8.88 c0,3.02,1.97,6.04,12.79,19.74c7.02,8.9,13.47,17.78,14.32,19.72c4.64,10.68-1.36,27.32-12.29,34.08 c-7.79,4.813-6.459,4.931-64.308,4.931c-2.974,0-6.096,0-9.392,0h-62.27v-32.13h97.9l2.89-2.01c1.95-1.36,3.08-3.23,3.51-5.79 c0.6-3.68,0.29-4.16-11.8-17.78c-14.29-16.1-15.8-19.04-15.06-29.32c0.84-11.73,11.3-28.77,29.58-28.77L326.488,81.928  M334.488,73.916l-8.013,0.012l-181.56,0.27c-10.458,0-20.171,4.518-27.342,12.722c-5.814,6.652-9.63,15.429-10.206,23.477 c-0.973,13.511,2.137,18.393,17.056,35.202c4.33,4.877,8.447,9.516,9.821,11.486c-0.022,0.079-0.042,0.13-0.054,0.159 c-0.015,0.012-0.038,0.03-0.07,0.052l-0.822,0.572H37.908h-8v8v32.13v8h8h62.27h4.937h4.455c28.522,0,42.6-0.027,50.894-0.635 c9.49-0.695,12.518-2.323,17.054-5.14l0.566-0.351c14.262-8.821,21.612-29.827,15.422-44.074 c-1.91-4.358-14.003-19.746-15.376-21.486c-3.796-4.807-10.062-12.74-11.054-15.036c0.024-0.193,0.071-0.393,0.121-0.532 c0.165-0.042,0.481-0.098,1.001-0.098l58.86-0.167v79.517v8h8h34.15h8v-8v-79.47h49.28h8v-8v-28.6V73.916L334.488,73.916z\"\n})), React.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#FFE81F\",\n  d: \"M419.548,82.857l40.18,116.22l-32.77-0.18l-5.32-17.41l-58.439-0.26l-5.221,16.77h-33.369l39.739-115.14 H419.548 M372.737,156.478l39.801-0.05c0.001,0,0.001,0.001,0.001,0.001c0.136,0-19.342-57.201-19.472-57.241l0,0 C392.925,99.183,372.288,156.478,372.737,156.478 M425.247,74.857h-5.699h-55.2h-5.701l-1.86,5.39l-39.74,115.141l-3.662,10.61 h11.225h33.37h5.889l1.75-5.623l3.461-11.121l46.632,0.207l3.599,11.774l1.721,5.629l5.887,0.033l32.77,0.18l11.297,0.062 l-3.691-10.676l-40.18-116.22L425.247,74.857L425.247,74.857z M383.851,148.464c2.468-7.027,5.904-16.657,9.014-25.312 c2.948,8.644,6.209,18.245,8.588,25.29L383.851,148.464L383.851,148.464z\"\n})), React.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#FFE81F\",\n  d: \"M532.396,82.857c25.921,0,43.91,0.37,47.37,0.97c8,1.39,15.23,5.66,20.65,12.22 c5.67,6.86,6.97,10.14,7.71,19.54c1.061,13.27-5.25,24.72-17.7,32.15c-3.63,2.17-7.359,4.28-8.29,4.7 c-1.43,0.65-1.239,1.27,1.32,4.27c1.649,1.93,4.51,4.68,6.35,6.11l3.36,2.61l62.08,0.89l0.609,31.68h-38.061 c-29.439,0-38.86-0.27-41.62-1.2c-4.13-1.4-14.069-9.82-34.271-29.04l-14.42-13.72l0.152,43.96h-37.043V82.857H532.396  M526.938,134.627h19.671c19.141,0,19.739-0.06,22.47-2.11c4.881-3.66,6.609-7.43,6.091-13.22c-0.53-5.97-2.83-9.08-8.601-11.58 c-3.25-1.42-6.381-1.65-21.721-1.65h-17.91V134.627 M532.396,74.857h-41.8h-8v8v115.14v8h8h37.043h8.028l-0.028-8.028 l-0.088-25.216l0.84,0.799c24.986,23.773,32.356,29.173,37.218,30.821c3.733,1.259,9.982,1.624,44.188,1.624h38.061h8.154 l-0.156-8.154l-0.609-31.68l-0.148-7.734l-7.734-0.111l-59.402-0.851l-1.245-0.967c-0.396-0.309-0.876-0.717-1.389-1.179 c0.446-0.264,0.854-0.507,1.207-0.717c15.003-8.953,22.866-23.407,21.569-39.653c-0.863-10.959-2.82-15.896-9.52-24 c-6.584-7.969-15.621-13.298-25.447-15.005C575.678,74.999,548.257,74.857,532.396,74.857L532.396,74.857z M534.938,114.067h9.91 c14.027,0,16.806,0.233,18.518,0.981c3.25,1.408,3.58,2.091,3.835,4.957c0.256,2.848-0.097,3.994-2.922,6.112 c-0.093,0.069-0.164,0.123-0.223,0.166c-1.865,0.345-8.786,0.345-17.447,0.345h-11.67L534.938,114.067L534.938,114.067z\"\n})));\n\nvar SvgStarWarsLogo = function SvgStarWarsLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"693.615px\",\n    height: \"419.375px\",\n    viewBox: \"0 0 693.615 419.375\",\n    enableBackground: \"new 0 0 693.615 419.375\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgStarWarsLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Star_Wars_Logo.0a12a758.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState } from 'react';\r\n\r\nimport './V4.css';\r\n\r\nimport { ReactComponent as StarWarsLogo } from '../../../img/Star_Wars_Logo.svg';\r\n\r\nimport allData from '../allData.json';\r\n\r\nconst urlCatsByTerm = [\r\n\t'characters',\r\n\t'films',\r\n\t'homeworld',\r\n\t'people',\r\n\t'pilots',\r\n\t'planets',\r\n\t'residents',\r\n\t'species',\r\n\t'starships',\r\n\t'vehicles'\r\n];\r\nconst categories = [\r\n\t'films',\r\n\t'people',\r\n\t'planets',\r\n\t'species',\r\n\t'starships',\r\n\t'vehicles'\r\n];\r\n\r\nconst idFromUrl = (url) => {\r\n\t// ** args: url<string>\r\n\t// ** return: id<string>\r\n\r\n\tif (typeof url === 'string') {\r\n\t\tconst [ term, id ] = url\r\n\t\t\t.replace('https://swapi.co/api/', '')\r\n\t\t\t.split('/');\r\n\r\n\t\treturn `${term}_${id}`;\r\n\t} else {\r\n\t\tconsole.log('url', url);\r\n\t\treturn url;\r\n\t}\r\n};\r\n\r\nconst extractIdsFromUrls = (urlsArray) => {\r\n\t// ** args: urls<array>\r\n\t// ** return: ids<array>\r\n\r\n\tif (Array.isArray(urlsArray)) {\r\n\t\treturn urlsArray.map((url) => idFromUrl(url));\r\n\t} else {\r\n\t\treturn [ idFromUrl(urlsArray) ];\r\n\t}\r\n};\r\n\r\n/////////////////////////////////////////////////////////////////////////\r\nconst V4 = () => {\r\n\tconst [ term, setTerm ] = useState('');\r\n\tconst [ page, setPage ] = useState(1);\r\n\tconst [ dataId, setDataId ] = useState('');\r\n\tconst [ data, setData ] = useState({});\r\n\r\n\t// Basic mechanism:\r\n\t// Have initial display buttons\r\n\t// When buttons are clicked to show \"films\" page \"1\"\r\n\t// function looks at data\r\n\t// if data does not have the required data it fetches it\r\n\t// if data has required data it sends it back for render\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tlet count;\r\n\t\t\tlet pageIds = [];\r\n\t\t\tlet results;\r\n\t\t\tlet newTermObject = {};\r\n\r\n\t\t\tif (term === '' || page === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t!(\r\n\t\t\t\t\tdata.hasOwnProperty(term) &&\r\n\t\t\t\t\tdata[term].hasOwnProperty(`page_${page}`)\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\t// *****\r\n\t\t\t\t// Here allData is used in place of fetching data\r\n\t\t\t\t//\r\n\t\t\t\t// This will need to be replaced with useSwApi hook\r\n\t\t\t\t//\r\n\t\t\t\tcount = allData[term].count;\r\n\t\t\t\tresults = allData[term][page];\r\n\t\t\t\t//\r\n\t\t\t\t// *****\r\n\r\n\t\t\t\t// results are in... Now set url data as ids\r\n\t\t\t\tresults.forEach((result) => {\r\n\t\t\t\t\tconst termId = idFromUrl(result.url);\r\n\r\n\t\t\t\t\tObject.keys(result).forEach((keyInResult) => {\r\n\t\t\t\t\t\t// extract url-containing data first\r\n\t\t\t\t\t\tif (urlCatsByTerm.includes(keyInResult)) {\r\n\t\t\t\t\t\t\t// extract urls from list\r\n\t\t\t\t\t\t\tlet idsFromUrls = [ 'n/a' ];\r\n\t\t\t\t\t\t\tif (result[keyInResult]) {\r\n\t\t\t\t\t\t\t\tidsFromUrls = extractIdsFromUrls(\r\n\t\t\t\t\t\t\t\t\tresult[keyInResult]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// set data to newTermObject &\r\n\t\t\t\t\t\t\tnewTermObject[termId] = {\r\n\t\t\t\t\t\t\t\t...newTermObject[termId]\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tnewTermObject[termId][keyInResult] = idsFromUrls;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// and set non-url data as ids\r\n\t\t\t\t\t\t\tnewTermObject[termId] = {\r\n\t\t\t\t\t\t\t\t...newTermObject[termId]\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tnewTermObject[termId][keyInResult] =\r\n\t\t\t\t\t\t\t\tresult[keyInResult];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tpageIds.push(termId);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetData((prev) => ({\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\t[term]: {\r\n\t\t\t\t\t\t...prev[term],\r\n\t\t\t\t\t\tcount: count,\r\n\t\t\t\t\t\t[`page_${page}`]: [ ...pageIds ],\r\n\t\t\t\t\t\t...newTermObject\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ term, page, data ]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (dataId === '') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst setByDataId = ({ dataId, data, dataTerm }) => {\r\n\t\t\t\t// setter function simply takes the data and sets it in state\r\n\t\t\t\t// with appropriate checks...\r\n\r\n\t\t\t\tlet newTermObject = {};\r\n\r\n\t\t\t\tObject.keys(data).forEach((keyInResult) => {\r\n\t\t\t\t\t// extract url-containing data first\r\n\t\t\t\t\tif (urlCatsByTerm.includes(keyInResult)) {\r\n\t\t\t\t\t\t// extract urls from list\r\n\t\t\t\t\t\tlet idsFromUrls = [ 'unknown' ];\r\n\t\t\t\t\t\tif (!data[keyInResult]) {\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'keyInResult',\r\n\t\t\t\t\t\t\t\tkeyInResult,\r\n\t\t\t\t\t\t\t\tdata[keyInResult]\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'dataId, data, dataTerm',\r\n\t\t\t\t\t\t\t\tdataId,\r\n\t\t\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t\t\tdataTerm\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tidsFromUrls = extractIdsFromUrls(data[keyInResult]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// set data to newTermObject &\r\n\t\t\t\t\t\tnewTermObject[dataId] = {\r\n\t\t\t\t\t\t\t...newTermObject[dataId]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tnewTermObject[dataId][keyInResult] = idsFromUrls;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// and set non-url data as ids\r\n\t\t\t\t\t\tnewTermObject[dataId] = {\r\n\t\t\t\t\t\t\t...newTermObject[dataId]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tnewTermObject[dataId][keyInResult] = data[keyInResult];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Data set here\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetData((prev) => ({\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t[dataTerm]: {\r\n\t\t\t\t\t\t\t...prev[dataTerm],\r\n\t\t\t\t\t\t\t...newTermObject\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}, 2000);\r\n\t\t\t};\r\n\r\n\t\t\t// Call starts here ////////////////////////////////////////\r\n\t\t\tif (\r\n\t\t\t\tdata.hasOwnProperty(term) &&\r\n\t\t\t\tdata[term].hasOwnProperty(dataId)\r\n\t\t\t) {\r\n\t\t\t\tlet idsToFetch = [];\r\n\r\n\t\t\t\tconst currentDetail = data[term][dataId];\r\n\t\t\t\tObject.keys(currentDetail).forEach((detailKey) => {\r\n\t\t\t\t\tif (urlCatsByTerm.includes(detailKey)) {\r\n\t\t\t\t\t\tlet ids = currentDetail[detailKey];\r\n\t\t\t\t\t\tconsole.log('ids', ids);\r\n\t\t\t\t\t\tids.forEach((id) => {\r\n\t\t\t\t\t\t\tif (id !== 'n/a') {\r\n\t\t\t\t\t\t\t\tconst [ idTerm ] = id.split('_');\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\t\t\tdata.hasOwnProperty(idTerm) &&\r\n\t\t\t\t\t\t\t\t\t\tdata[idTerm].hasOwnProperty(id)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tidsToFetch.push({ id, idTerm });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log('id', id);\r\n\t\t\t\t\t\t\t\tconsole.log('currentDetail', currentDetail);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// fetch ids\r\n\t\t\t\tidsToFetch.forEach((inId) => {\r\n\t\t\t\t\tconst { id, idTerm } = inId;\r\n\r\n\t\t\t\t\t// *****\r\n\t\t\t\t\t// Here allData is used in place of fetching data\r\n\t\t\t\t\t//\r\n\t\t\t\t\tObject.keys(allData[idTerm]).forEach((page) => {\r\n\t\t\t\t\t\tif (page === Number.parseInt(page, 10).toString()) {\r\n\t\t\t\t\t\t\tallData[idTerm][page].forEach((item) => {\r\n\t\t\t\t\t\t\t\tconst itemId = idFromUrl(item.url);\r\n\t\t\t\t\t\t\t\tif (itemId === id) {\r\n\t\t\t\t\t\t\t\t\t// We have now found the single item result as\r\n\t\t\t\t\t\t\t\t\t// it would come from API\r\n\r\n\t\t\t\t\t\t\t\t\t// send the data to a setter function\r\n\t\t\t\t\t\t\t\t\tsetByDataId({\r\n\t\t\t\t\t\t\t\t\t\tdataId: id,\r\n\t\t\t\t\t\t\t\t\t\tdata: item,\r\n\t\t\t\t\t\t\t\t\t\tdataTerm: idTerm\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// *****\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// console.log('just finished writing url data...');\r\n\t\t},\r\n\t\t[ dataId, data, term ]\r\n\t);\r\n\r\n\tconst getTerms = (term) => {\r\n\t\tsetTerm(term);\r\n\t\tsetPage(1);\r\n\t\tsetDataId('');\r\n\t};\r\n\r\n\tconst getPage = (page) => {\r\n\t\tsetPage(page);\r\n\t};\r\n\r\n\tconst changeId = (changeToId) => {\r\n\t\tsetDataId(changeToId);\r\n\t};\r\n\r\n\tconst renderTerms = () => {\r\n\t\treturn categories.map((cat) => {\r\n\t\t\treturn <div onClick={() => getTerms(cat)}>{cat}</div>;\r\n\t\t});\r\n\t};\r\n\r\n\tconst renderPreparedDetail = (inObj) => {\r\n\t\t// console.log('in renderPreparedDetail...');\r\n\r\n\t\tconst keyConvert = [ 'pilots', 'residents', 'characters' ];\r\n\r\n\t\tlet singles = [];\r\n\t\tlet arrays = [];\r\n\r\n\t\tObject.keys(inObj).forEach((keyInObj) => {\r\n\t\t\tif ([ 'created', 'edited', 'url' ].includes(keyInObj)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (keyInObj === 'name') {\r\n\t\t\t\tsingles.unshift({ [keyInObj]: inObj[keyInObj] });\r\n\t\t\t} else if (urlCatsByTerm.includes(keyInObj)) {\r\n\t\t\t\tlet dataKey = keyInObj;\r\n\t\t\t\tif (keyConvert.includes(keyInObj)) {\r\n\t\t\t\t\tdataKey = 'people';\r\n\t\t\t\t}\r\n\t\t\t\tif (keyInObj === 'homeworld') {\r\n\t\t\t\t\tdataKey = 'planets';\r\n\t\t\t\t}\r\n\t\t\t\tlet arrayItems = inObj[keyInObj];\r\n\t\t\t\tlet returnItems = [];\r\n\t\t\t\tarrayItems.forEach((item) => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tdata.hasOwnProperty(dataKey) &&\r\n\t\t\t\t\t\tdata[dataKey].hasOwnProperty(item)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet itemName = data[dataKey][item].name;\r\n\t\t\t\t\t\treturnItems.push({ name: itemName, id: item });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturnItems.push({ name: '', id: item });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tarrays.push({ [keyInObj]: [ ...returnItems ] });\r\n\t\t\t} else {\r\n\t\t\t\tsingles.push({ [keyInObj]: inObj[keyInObj] });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn [ ...singles, ...arrays ];\r\n\t};\r\n\r\n\tconst renderMenu = () => {\r\n\t\tif (\r\n\t\t\tdata.hasOwnProperty(term) &&\r\n\t\t\tdata[term].hasOwnProperty(`page_${page}`) &&\r\n\t\t\tObject.keys(data[term]).length > 0\r\n\t\t) {\r\n\t\t\tlet termsArray = [];\r\n\t\t\tlet pageIdsArray = data[term][`page_${page}`];\r\n\t\t\tpageIdsArray.forEach((pageId) => {\r\n\t\t\t\tif (pageId.includes(term)) {\r\n\t\t\t\t\ttermsArray.push({\r\n\t\t\t\t\t\tpageId: pageId,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tname: data[term][pageId].name\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{termsArray.map((el) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div onClick={() => changeId(el.pageId)}>\r\n\t\t\t\t\t\t\t\t{el.name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tPages:\r\n\t\t\t\t\t{renderPageLinks(data[term].count)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst renderPageLinks = (pageCount) => {\r\n\t\tlet pages = Math.ceil((pageCount + 1) / 10);\r\n\t\tlet pageLinksArray = [];\r\n\t\tfor (let i = 1; i <= pages; i++) {\r\n\t\t\tpageLinksArray.push({ page: i, display: `${i}` });\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{pageLinksArray.map((link) => (\r\n\t\t\t\t\t<span onClick={() => getPage(link.page)}>\r\n\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t{link.display}{' '}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderDetail = () => {\r\n\t\tif (\r\n\t\t\tdata.hasOwnProperty(term) &&\r\n\t\t\tdata[term].hasOwnProperty(dataId) &&\r\n\t\t\tObject.keys(data[term][dataId]).length > 0\r\n\t\t) {\r\n\t\t\tlet detailData = data[term][dataId];\r\n\t\t\tconsole.log('detailData', detailData);\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{renderPreparedDetail(detailData).map((el) => {\r\n\t\t\t\t\t\t\t// el is an object\r\n\r\n\t\t\t\t\t\t\tif (Array.isArray(Object.values(el)[0])) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"v4_keyValBox\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"v4_left\">\r\n\t\t\t\t\t\t\t\t\t\t\t{Object.keys(el)[0]}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"v4_right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{Object.keys(el).map((val) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn el[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval\r\n\t\t\t\t\t\t\t\t\t\t\t\t].map((valInside) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalInside.name ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'visible'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'hidden'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'needs a handler...'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{valInside.name ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'...'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className=\"v4_keyValBox\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"v4_left\">\r\n\t\t\t\t\t\t\t\t\t\t\t{Object.keys(el)[0]}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"v4_right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{Object.values(el)[0]}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"v4_page\">\r\n\t\t\t<StarWarsLogo className=\"v4_swLogo\" />\r\n\r\n\t\t\t<div className=\"v4_content\">\r\n\t\t\t\t<div className=\"v4_terms\">{renderTerms()}</div>\r\n\t\t\t\t<div className=\"v4_menu\">{renderMenu()}</div>\r\n\t\t\t\t<div className=\"v4_detail\">{renderDetail()}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default V4;\r\n","function memoize(fn) {\r\n\tconst cache = {};\r\n\treturn async function(...args) {\r\n\t\tif (cache[args] && !cache[args].hasOwnProperty('error')) {\r\n\t\t\treturn cache[args];\r\n\t\t}\r\n\r\n\t\tconst result = await fn.apply(this, args);\r\n\t\tcache[args] = result;\r\n\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nfunction checkResponse(resp) {\r\n\tif (!resp.ok) {\r\n\t\tconst { status, statusText } = resp;\r\n\t\tconst errorToReturn = new Error();\r\n\t\terrorToReturn.name = `${status}`;\r\n\t\terrorToReturn.message = `${statusText}`;\r\n\r\n\t\tthrow errorToReturn;\r\n\t}\r\n\treturn resp;\r\n}\r\n\r\nasync function fetchAPI(param) {\r\n\ttry {\r\n\t\tconst headers = new Headers();\r\n\t\theaders.append('Content-type', 'application/json');\r\n\t\theaders.append('Accept', 'application/json');\r\n\r\n\t\tconst resp = await fetch(param, { headers });\r\n\t\tconst checkedResp = await checkResponse(resp);\r\n\t\tconst json = await checkedResp.json();\r\n\r\n\t\treturn { data: json };\r\n\t} catch (error) {\r\n\t\treturn { error };\r\n\t}\r\n}\r\n\r\nexport const memoizedFetch = memoize(fetchAPI);\r\n","export function getItemId(category, itemNumber) {\r\n\treturn `${category}_${itemNumber}`;\r\n}\r\n\r\nexport function getUrlInfo(url) {\r\n\tconst [ category, idNumber ] = url\r\n\t\t.replace('https://swapi.co/api/', '')\r\n\t\t.split('/');\r\n\treturn [ category, idNumber ];\r\n}\r\n\r\nexport function singleReducer(\r\n\tprev,\r\n\t{ category, itemNumber, isFetching, error, data }\r\n) {\r\n\tconst itemId = getItemId(category, itemNumber);\r\n\r\n\tconst newItem = {\r\n\t\t...prev[category].items[itemId]\r\n\t};\r\n\r\n\tif (isFetching === true || isFetching === false) {\r\n\t\tnewItem.isFetching = isFetching;\r\n\t}\r\n\tif (error) {\r\n\t\tconsole.log('error (in singleReducer)', error);\r\n\t\tnewItem.error = error;\r\n\t}\r\n\tif (data) {\r\n\t\tnewItem.data = data;\r\n\t}\r\n\r\n\treturn {\r\n\t\t...prev,\r\n\t\t[category]: {\r\n\t\t\t...prev[category],\r\n\t\t\titems: {\r\n\t\t\t\t...prev[category].items,\r\n\t\t\t\t[itemId]: newItem\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function initialSingle(prev, data) {\r\n\tconst { category, itemNumber } = data;\r\n\tconst itemId = getItemId(category, itemNumber);\r\n\tconst initialObj = {\r\n\t\tdata: '',\r\n\t\terror: '',\r\n\t\tisFetching: false\r\n\t};\r\n\r\n\t// Check for itemId was made before function call\r\n\t// Return a new data object with itemId initialized\r\n\treturn {\r\n\t\t...prev,\r\n\t\t[category]: {\r\n\t\t\t...prev[category],\r\n\t\t\titems: {\r\n\t\t\t\t...prev[category].items,\r\n\t\t\t\t[itemId]: initialObj\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n","import { memoizedFetch } from '../helpers/api';\r\nimport { getUrlInfo, singleReducer } from './reducers';\r\n\r\nconst BASE_URL = 'https://swapi.co/api/';\r\n\r\nfunction handleResults(data) {\r\n\tconst [ category ] = getUrlInfo(data.data.url);\r\n\r\n\tif (category === 'films') {\r\n\t\tconst dataWithName = { ...data.data };\r\n\t\tdataWithName.name = data.data.title;\r\n\r\n\t\treturn dataWithName;\r\n\t}\r\n\r\n\treturn data.data;\r\n}\r\n\r\n// fetch data from api\r\nexport const fetchData = async (setData, { category, itemNumber }) => {\r\n\t// Set isFetching to true\r\n\tsetData((prev) =>\r\n\t\tsingleReducer(prev, {\r\n\t\t\tcategory,\r\n\t\t\titemNumber,\r\n\t\t\tisFetching: true,\r\n\t\t\terror: ''\r\n\t\t})\r\n\t);\r\n\r\n\tconst url = `${BASE_URL}${category}/${itemNumber}/`;\r\n\r\n\tconst config = {\r\n\t\tmethod: 'get',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json, text/plain, */*'\r\n\t\t}\r\n\t};\r\n\r\n\ttry {\r\n\t\tconst data = await memoizedFetch(url, config);\r\n\r\n\t\t// ... results handler would go here if needed\r\n\t\tconst checkedData = handleResults(data);\r\n\r\n\t\t// Set Data\r\n\t\tsetData((prev) =>\r\n\t\t\tsingleReducer(prev, {\r\n\t\t\t\tcategory,\r\n\t\t\t\titemNumber,\r\n\t\t\t\tdata: checkedData\r\n\t\t\t})\r\n\t\t);\r\n\t} catch (error) {\r\n\t\t// Set error\r\n\t\tsetData((prev) =>\r\n\t\t\tsingleReducer(prev, {\r\n\t\t\t\tcategory,\r\n\t\t\t\titemNumber,\r\n\t\t\t\terror: JSON.stringify(error)\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t// Set isFetching back to false\r\n\tsetData((prev) =>\r\n\t\tsingleReducer(prev, {\r\n\t\t\tcategory,\r\n\t\t\titemNumber,\r\n\t\t\tisFetching: false\r\n\t\t})\r\n\t);\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { fetchData } from './fetchSingle';\r\nimport { getItemId, initialSingle } from './reducers';\r\n\r\nconst initialDataState = {\r\n\tfilms: {\r\n\t\tcount: 0,\r\n\t\tpages: {},\r\n\t\titems: {}\r\n\t},\r\n\tpeople: {\r\n\t\tcount: 0,\r\n\t\tpages: {},\r\n\t\titems: {}\r\n\t},\r\n\tplanets: {\r\n\t\tcount: 0,\r\n\t\tpages: {},\r\n\t\titems: {}\r\n\t},\r\n\tspecies: {\r\n\t\tcount: 0,\r\n\t\tpages: {},\r\n\t\titems: {}\r\n\t},\r\n\tstarships: {\r\n\t\tcount: 0,\r\n\t\tpages: {},\r\n\t\titems: {}\r\n\t},\r\n\tvehicles: {\r\n\t\tcount: 0,\r\n\t\tpages: {},\r\n\t\titems: {}\r\n\t}\r\n};\r\n\r\nconst useSwApi = () => {\r\n\tconst [ data, setData ] = useState(initialDataState);\r\n\tconst [ requestForSingles, setRequestForSingles ] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// Sync with requestForSingles stuff\r\n\r\n\t\t\t// Iterate through array to initalize requests\r\n\t\t\trequestForSingles.forEach((req) => {\r\n\t\t\t\tconst { category, itemNumber } = req;\r\n\t\t\t\tconst itemId = getItemId(category, itemNumber);\r\n\r\n\t\t\t\t// Check that data does not have itemId object already\r\n\t\t\t\tif (!data[category].items.hasOwnProperty(itemId)) {\r\n\t\t\t\t\t// Doesn't have item object yet so initialize one\r\n\t\t\t\t\tsetData((prev) => initialSingle(prev, req));\r\n\r\n\t\t\t\t\t// Then call the singles api function\r\n\t\t\t\t\tfetchData(setData, { category, itemNumber });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ requestForSingles, data ]\r\n\t);\r\n\r\n\treturn [ data, setRequestForSingles ];\r\n};\r\n\r\nexport default useSwApi;\r\n","import React, { useState, useEffect } from 'react';\r\nimport useSwApi from '../hooks/useSwApi';\r\nimport allIdsArray from '../helpers/allIdsArray.json';\r\n\r\nimport './V5.css';\r\nconst uuid = require('uuid/v4');\r\n\r\nconst V5 = () => {\r\n\tconst [ listSingles, setListSingles ] = useState([]);\r\n\tconst [ data, setRequestForSingles ] = useSwApi();\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (Object.keys(listSingles).length > 0) {\r\n\t\t\t\tsetRequestForSingles(listSingles);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ listSingles, setRequestForSingles ]\r\n\t);\r\n\r\n\tconst renderSingle = (props) => {\r\n\t\t// *****\r\n\t\t//\r\n\t\t// singleData should be an object in data\r\n\t\t// one for every id\r\n\t\t// isFetching: false\r\n\t\t// error: '',\r\n\t\t// data: {}\r\n\t\t//\r\n\t\t// *****\r\n\r\n\t\tconst getSingleContent = () => {\r\n\t\t\tif (props) {\r\n\t\t\t\tconst { data: inData, error, isFetching } = props;\r\n\r\n\t\t\t\tif (isFetching === true) {\r\n\t\t\t\t\treturn <div>...loading...</div>;\r\n\t\t\t\t} else if (error && error !== '') {\r\n\t\t\t\t\treturn <div>Error: {error}</div>;\r\n\t\t\t\t} else if (inData && Object.keys(inData).length > 0) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{inData.name} - {inData.created}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn <div>Nothing to show yet...</div>;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn <div className=\"single\">{getSingleContent()}</div>;\r\n\t};\r\n\r\n\tfunction renderIdItem(inItem, inData) {\r\n\t\tconst { category: itemCat, idNumber: itemNum, id: itemId } = inItem;\r\n\t\tconst displayItem = inData[itemCat].items[itemId];\r\n\r\n\t\t// if relevant data is in inData\r\n\t\tif (inData[itemCat].items.hasOwnProperty(itemId)) {\r\n\t\t\t// use inData in return\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\tclassName=\"v5_single-item\"\r\n\t\t\t\t\tonClick={() => console.log('displayItem', displayItem)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{renderSingle(displayItem)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\t// else use inItem in return\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\tclassName=\"v5_single-item\"\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tsetListSingles([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcategory: itemCat,\r\n\t\t\t\t\t\t\t\titemNumber: itemNum\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t])}\r\n\t\t\t\t>\r\n\t\t\t\t\t{inItem.idNumber}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderNumberButtons(inArray) {\r\n\t\treturn inArray.map((cat) => {\r\n\t\t\tlet catName = cat[0].category;\r\n\t\t\treturn (\r\n\t\t\t\t<div key={uuid()}>\r\n\t\t\t\t\t<div>{catName}</div>\r\n\t\t\t\t\t<div className=\"v5_singles-box\">\r\n\t\t\t\t\t\t{cat.map((idItem) => renderIdItem(idItem, data))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div>Fetching single items</div>\r\n\t\t\t{renderNumberButtons(allIdsArray)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default V5;\r\n","import CONSTANTS from '../../../constants.json';\r\n\r\nexport const urlCatsByTerm = CONSTANTS.urlCatsByTerm;\r\n\r\nexport const removeUnderscores = (str) => str.replace(/_/g, ' ');\r\n\r\nexport const capitalize = (word) => {\r\n\treturn `${word[0].toUpperCase()}${word.slice(1)}`;\r\n};\r\n\r\nexport const capitalizeTitleCase = (str) => {\r\n\treturn str\r\n\t\t.split(' ')\r\n\t\t.map((word) => {\r\n\t\t\treturn capitalize(word);\r\n\t\t})\r\n\t\t.join(' ');\r\n};\r\n\r\nexport const capitalizeSentenceCase = (str) => {\r\n\tlet words = removeUnderscores(str).split(' ');\r\n\treturn [ capitalize(words[0]), ...words.slice(1) ].join(' ');\r\n};\r\n\r\nexport const capitalizeCommaList = (str) => {\r\n\tlet words = str.split(', ');\r\n\treturn [ ...words.map((word) => capitalize(word)) ].join(', ');\r\n};\r\n\r\nexport const getLocaleNumber = (inStr) => {\r\n\tlet str = inStr.toString();\r\n\r\n\tif (\r\n\t\t!Number.isNaN(Number.parseFloat(str, 10)) &&\r\n\t\tNumber.parseFloat(str, 10).toString() === str\r\n\t) {\r\n\t\treturn Number.parseFloat(str, 10).toLocaleString();\r\n\t}\r\n\treturn str;\r\n};\r\n\r\nexport function getUTCDate(dateStr) {\r\n\tlet date = new Date(Date.parse(dateStr)).toUTCString();\r\n\tlet dateArray = date.split(' ').splice(1, 3);\r\n\treturn dateArray.join(' ');\r\n}\r\n\r\nexport function getItemId(category, itemNumber) {\r\n\treturn `${category}_${itemNumber}`;\r\n}\r\n\r\nexport const getIsUrl = (val) => {\r\n\tif (!(typeof val === 'string')) {\r\n\t\treturn null;\r\n\t}\r\n\treturn val.includes('https://swapi.co/api/') ? true : false;\r\n};\r\n\r\nexport function getUrlInfo(url) {\r\n\tconst [ category, idNumber ] = url\r\n\t\t.replace('https://swapi.co/api/', '')\r\n\t\t.split('/');\r\n\treturn [ category, idNumber ];\r\n}\r\n\r\nexport const idFromUrl = (url) => {\r\n\t// ** args: url<string>\r\n\t// ** return: id<string>\r\n\r\n\tif (typeof url === 'string') {\r\n\t\tconst [ category, idNumber ] = getUrlInfo(url);\r\n\r\n\t\treturn getItemId(category, idNumber);\r\n\t} else {\r\n\t\tconsole.log('url', url);\r\n\t\treturn;\r\n\t}\r\n};\r\n\r\nconst extractIdsFromUrls = (urlsArray) => {\r\n\t// ** args: urls<array>\r\n\t// ** return: ids<array>\r\n\r\n\tif (Array.isArray(urlsArray)) {\r\n\t\treturn urlsArray.map((url) => idFromUrl(url));\r\n\t} else {\r\n\t\treturn [ idFromUrl(urlsArray) ];\r\n\t}\r\n};\r\n\r\nexport function getUrlIdsFromItem(item) {\r\n\t// ** args: item<object>, itemId\r\n\t// ** return: ids<array><array>\r\n\r\n\tlet idsArray = [];\r\n\r\n\tObject.keys(item).forEach((keyInItem) => {\r\n\t\t// extract url-containing data\r\n\t\tif (urlCatsByTerm.includes(keyInItem)) {\r\n\t\t\t// extract urls from list\r\n\t\t\tlet idsFromUrls = [];\r\n\t\t\tif (item[keyInItem]) {\r\n\t\t\t\tidsFromUrls = extractIdsFromUrls(item[keyInItem]);\r\n\t\t\t}\r\n\t\t\tidsArray.push(...idsFromUrls);\r\n\t\t}\r\n\t});\r\n\r\n\treturn idsArray;\r\n}\r\n\r\nexport function removeEmptyEntries(inObj) {\r\n\tlet outObj = {};\r\n\r\n\tObject.keys(inObj).forEach((key) => {\r\n\t\tlet val = inObj[key];\r\n\r\n\t\tif (!key) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t!val ||\r\n\t\t\t!(\r\n\t\t\t\ttypeof val === 'string' ||\r\n\t\t\t\ttypeof val === 'number' ||\r\n\t\t\t\tArray.isArray(val)\r\n\t\t\t) ||\r\n\t\t\t(Array.isArray(val) &&\r\n\t\t\t\t(val.length < 1 ||\r\n\t\t\t\t\t(!val[0] && val !== 0) ||\r\n\t\t\t\t\t(val[0].length > 0 && val[0].charCodeAt(0) < 33)))\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toutObj[key] = val;\r\n\t});\r\n\r\n\treturn outObj;\r\n}\r\n\r\nexport function orderByKeyGroups(initObj) {\r\n\tlet singles = {};\r\n\tlet lists = {\r\n\t\tpeople: [],\r\n\t\tcharacters: [],\r\n\t\tresidents: [],\r\n\t\tspecies: [],\r\n\t\thomeworld: [],\r\n\t\tplanets: [],\r\n\t\tstarships: [],\r\n\t\tvehicles: [],\r\n\t\tfilms: []\r\n\t};\r\n\tlet crawl = {};\r\n\r\n\tconst inObj = { ...removeEmptyEntries(initObj) };\r\n\r\n\tObject.keys(inObj).forEach((key) => {\r\n\t\tlet val = inObj[key];\r\n\r\n\t\tif ([ 'created', 'edited', 'url', 'title' ].includes(key)) {\r\n\t\t\treturn;\r\n\t\t} else if (key === 'opening_crawl') {\r\n\t\t\tcrawl[key] = val;\r\n\t\t} else if (Array.isArray(val)) {\r\n\t\t\tif (val.length > 0) {\r\n\t\t\t\tlists[key] = val;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsingles[key] = val;\r\n\t\t}\r\n\t});\r\n\r\n\tsingles = { name: singles['name'], ...singles };\r\n\tconst outObj = { ...singles, ...crawl, ...lists };\r\n\r\n\treturn { ...removeEmptyEntries(outObj) };\r\n}\r\n","function memoize(fn) {\r\n\tconst cache = {};\r\n\treturn async function(...args) {\r\n\t\tif (cache[args] && !cache[args].hasOwnProperty('error')) {\r\n\t\t\treturn cache[args];\r\n\t\t}\r\n\r\n\t\tconst result = await fn.apply(this, args);\r\n\t\tcache[args] = result;\r\n\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nfunction checkResponse(resp) {\r\n\tif (!resp.ok) {\r\n\t\tconst { status, statusText } = resp;\r\n\t\tconst errorToReturn = new Error();\r\n\t\terrorToReturn.name = `${status}`;\r\n\t\terrorToReturn.message = `${statusText}`;\r\n\r\n\t\tthrow errorToReturn;\r\n\t}\r\n\treturn resp;\r\n}\r\n\r\nasync function fetchAPI(param) {\r\n\ttry {\r\n\t\tconst headers = new Headers();\r\n\t\theaders.append('Content-type', 'application/json');\r\n\t\theaders.append('Accept', 'application/json');\r\n\r\n\t\tconst resp = await fetch(param, { headers });\r\n\t\tconst checkedResp = await checkResponse(resp);\r\n\t\tconst json = await checkedResp.json();\r\n\r\n\t\treturn { data: json };\r\n\t} catch (error) {\r\n\t\treturn { error };\r\n\t}\r\n}\r\n\r\nexport const memoizedFetch = memoize(fetchAPI);\r\n","import { getUrlInfo, getItemId } from '../helpers/helpers';\r\n\r\nexport function singleReducer(\r\n\tprev,\r\n\t{ category, itemNumber, isFetching, error, data }\r\n) {\r\n\tconst itemId = getItemId(category, itemNumber);\r\n\r\n\tconst newItem = {\r\n\t\t...prev[category].items[itemId]\r\n\t};\r\n\r\n\tif (isFetching === true || isFetching === false) {\r\n\t\tnewItem.isFetching = isFetching;\r\n\t}\r\n\tif (error) {\r\n\t\tconsole.log('error (in singleReducer)', error);\r\n\t\tnewItem.error = error;\r\n\t}\r\n\tif (data) {\r\n\t\tnewItem.data = data;\r\n\t}\r\n\r\n\treturn {\r\n\t\t...prev,\r\n\t\t[category]: {\r\n\t\t\t...prev[category],\r\n\t\t\titems: {\r\n\t\t\t\t...prev[category].items,\r\n\t\t\t\t[itemId]: newItem\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function initialSingle(prev, data) {\r\n\tconst { category, itemNumber } = data;\r\n\tconst itemId = getItemId(category, itemNumber);\r\n\tconst initialObj = {\r\n\t\tdata: '',\r\n\t\terror: '',\r\n\t\tisFetching: false\r\n\t};\r\n\r\n\t// Check for itemId was made before function call\r\n\t// Return a new data object with itemId initialized\r\n\treturn {\r\n\t\t...prev,\r\n\t\t[category]: {\r\n\t\t\t...prev[category],\r\n\t\t\titems: {\r\n\t\t\t\t...prev[category].items,\r\n\t\t\t\t[itemId]: initialObj\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function pageReducer(prev, { category, data, page }) {\r\n\t// Need to add count if data[category] does not exist\r\n\t// Need to iterate through each item in array\r\n\t// Add key: itemId, and value: itemValues\r\n\t// Add key: page to pages object and push itemIds to page array\r\n\tlet newItems = {};\r\n\tlet newCount = prev[category].count;\r\n\tlet newPageArray = [];\r\n\r\n\t// Reduce count\r\n\tif (prev[category].count === 0) {\r\n\t\tnewCount = data.data.count;\r\n\t}\r\n\r\n\t// Reduce Pages\r\n\t// Reduce items\r\n\tdata.data.results.forEach((item) => {\r\n\t\tconst url = item.url;\r\n\t\tconst [ catFromUrl, idNumberFromUrl ] = getUrlInfo(url);\r\n\t\tconst itemId = getItemId(catFromUrl, idNumberFromUrl);\r\n\r\n\t\t// add to newPages array\r\n\t\tnewPageArray.push(itemId);\r\n\r\n\t\t// add to newItems object\r\n\t\tnewItems[itemId] = { ...item };\r\n\t});\r\n\r\n\tlet newData = {\r\n\t\t...prev,\r\n\t\t[category]: {\r\n\t\t\t...prev[category],\r\n\t\t\tcount: newCount,\r\n\t\t\tpages: {\r\n\t\t\t\t...prev[category].pages,\r\n\t\t\t\t[page]: newPageArray\r\n\t\t\t},\r\n\t\t\titems: {\r\n\t\t\t\t...prev[category].items,\r\n\t\t\t\t...newItems\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// console.log('newData', newData);\r\n\treturn newData;\r\n}\r\n","import { memoizedFetch } from '../helpers/api';\r\nimport { getUrlInfo } from '../helpers/helpers';\r\nimport { singleReducer, pageReducer } from './reducers';\r\n\r\nconst BASE_URL = 'https://swapi.co/api/';\r\n\r\n// *************************************************************\r\nfunction handleSingleResults(data) {\r\n\t// data.data is the object of key value pairs in a single item\r\n\tconst [ category ] = getUrlInfo(data.data.url);\r\n\r\n\tif (category === 'films') {\r\n\t\tconst dataWithName = { ...data.data };\r\n\t\tdataWithName.name = data.data.title;\r\n\r\n\t\treturn dataWithName;\r\n\t}\r\n\r\n\treturn data.data;\r\n}\r\n\r\n// *************************************************************\r\nfunction handlePageResults(data) {\r\n\t// data.data is the object the has count: next: previous: results: {keySingles: valueSingles}\r\n\r\n\tif (data.data.results[0].hasOwnProperty('name')) {\r\n\t\treturn data;\r\n\t} else {\r\n\t\tlet dataWithNames = { ...data };\r\n\t\tlet results = data.data.results;\r\n\r\n\t\tlet item;\r\n\t\tfor (item of results) {\r\n\t\t\titem.name = item.title;\r\n\t\t}\r\n\r\n\t\tdataWithNames.data.results.sort((a, b) => a.episode_id - b.episode_id);\r\n\t\treturn dataWithNames;\r\n\t}\r\n}\r\n\r\n// *************************************************************\r\n// fetch data from api\r\nexport const fetchSingle = async (setData, { category, itemNumber }) => {\r\n\t// Set isFetching to true\r\n\tsetData((prev) =>\r\n\t\tsingleReducer(prev, {\r\n\t\t\tcategory,\r\n\t\t\titemNumber,\r\n\t\t\tisFetching: true,\r\n\t\t\terror: ''\r\n\t\t})\r\n\t);\r\n\r\n\tconst url = `${BASE_URL}${category}/${itemNumber}/`;\r\n\r\n\tconst config = {\r\n\t\tmethod: 'get',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json, text/plain, */*'\r\n\t\t}\r\n\t};\r\n\r\n\ttry {\r\n\t\tconst data = await memoizedFetch(url, config);\r\n\r\n\t\t// ... results handler would go here if needed\r\n\t\tconst checkedData = handleSingleResults(data);\r\n\r\n\t\t// Set Data\r\n\t\tsetData((prev) =>\r\n\t\t\tsingleReducer(prev, {\r\n\t\t\t\tcategory,\r\n\t\t\t\titemNumber,\r\n\t\t\t\tdata: checkedData\r\n\t\t\t})\r\n\t\t);\r\n\t} catch (error) {\r\n\t\t// Set error\r\n\t\tsetData((prev) =>\r\n\t\t\tsingleReducer(prev, {\r\n\t\t\t\tcategory,\r\n\t\t\t\titemNumber,\r\n\t\t\t\terror: JSON.stringify(error)\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t// Set isFetching back to false\r\n\tsetData((prev) =>\r\n\t\tsingleReducer(prev, {\r\n\t\t\tcategory,\r\n\t\t\titemNumber,\r\n\t\t\tisFetching: false\r\n\t\t})\r\n\t);\r\n};\r\n\r\n// *************************************************************\r\n\r\nexport const fetchPage = async (\r\n\t{ setData, setError, setIsFetching },\r\n\t{ category, pageNumber }\r\n) => {\r\n\tsetError('');\r\n\tsetIsFetching(true);\r\n\r\n\tconst url = `${BASE_URL}${category}/?page=${pageNumber}`;\r\n\r\n\tconst config = {\r\n\t\tmethod: 'get',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json, text/plain, */*'\r\n\t\t}\r\n\t};\r\n\r\n\ttry {\r\n\t\tconst data = await memoizedFetch(url, config);\r\n\t\t// data is handledResponse - could be data or error inside\r\n\r\n\t\tconst dataToSet = handlePageResults(data);\r\n\r\n\t\tsetData((prev) =>\r\n\t\t\tpageReducer(prev, { category, data: dataToSet, page: pageNumber })\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.log('error', error);\r\n\t\tsetError(JSON.stringify(error));\r\n\t}\r\n\r\n\tsetIsFetching(false);\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { getItemId, getUrlInfo, getUrlIdsFromItem } from '../helpers/helpers';\r\nimport { fetchSingle, fetchPage } from '../helpers/fetchData';\r\nimport { initialSingle } from '../helpers/reducers';\r\nimport CONSTANTS from '../../../constants.json';\r\n\r\nconst initialDataState = CONSTANTS.initialDataState;\r\n\r\nconst useSwApi = () => {\r\n\tconst [ data, setData ] = useState(initialDataState);\r\n\tconst [ error, setError ] = useState('');\r\n\tconst [ isFetching, setIsFetching ] = useState(false);\r\n\tconst [ requestForSingles, setRequestForSingles ] = useState([]);\r\n\tconst [ requestForPage, setRequestForPage ] = useState({\r\n\t\tcategory: '',\r\n\t\tpage: 0\r\n\t});\r\n\tconst [ requestForItem, setRequestForItem ] = useState(''); // itemId eg: 'films_1'\r\n\tconst [ currentDisplayData, setCurrentDisplayData ] = useState({\r\n\t\tcurrentPageData: {\r\n\t\t\tpageItems: [], // array of {itemId: 'films_1', itemName: 'The Phantom Menace'}\r\n\t\t\tpageLinks: [] // arraa of {pageNumber: 2, pageDisplay: 2}\r\n\t\t},\r\n\t\tcurrentItemData: {}\r\n\t});\r\n\t// let previousPageRef = useRef('');\r\n\r\n\t// Sync with requestForSingles\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// Iterate through array to initalize requests\r\n\t\t\trequestForSingles.forEach((req) => {\r\n\t\t\t\tconst itemId = req;\r\n\t\t\t\tconst [ category, itemNumber ] = itemId.split('_');\r\n\r\n\t\t\t\t// Check that data does not have itemId object already\r\n\t\t\t\tif (category && !data[category].items.hasOwnProperty(itemId)) {\r\n\t\t\t\t\t// Doesn't have item object yet so initialize one\r\n\t\t\t\t\tsetData((prev) =>\r\n\t\t\t\t\t\tinitialSingle(prev, { category, itemNumber })\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// Then call the singles api function\r\n\t\t\t\t\tfetchSingle(setData, { category, itemNumber });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ requestForSingles ]\r\n\t);\r\n\r\n\t// Sync with requestForPage - Fetch\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// handle fetching of page data\r\n\t\t\tconst { category, page: pageNumber } = requestForPage;\r\n\r\n\t\t\tif (category !== '' && pageNumber > 0) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tdata.hasOwnProperty(category) &&\r\n\t\t\t\t\t!data[category].pages.hasOwnProperty(pageNumber)\r\n\t\t\t\t) {\r\n\t\t\t\t\tfetchPage(\r\n\t\t\t\t\t\t{ setData, setError, setIsFetching },\r\n\t\t\t\t\t\t{ category, pageNumber }\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ requestForPage ]\r\n\t);\r\n\r\n\t// Sync with requestForItem - To get the Urls to fetch\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// when requestForItem changes, get item from data and setCurrentDisplayData\r\n\t\t\t// AND get any urls and setRequestForSingles with them\r\n\t\t\tconst itemId = requestForItem;\r\n\r\n\t\t\tconst [ category ] = itemId.split('_');\r\n\t\t\tif (\r\n\t\t\t\tdata.hasOwnProperty(category) &&\r\n\t\t\t\tdata[category].items.hasOwnProperty(itemId)\r\n\t\t\t) {\r\n\t\t\t\tconst itemData = data[category].items[itemId];\r\n\r\n\t\t\t\tlet urlsArray = getUrlIdsFromItem(itemData);\r\n\r\n\t\t\t\t// On getting data, gather all urls and set request for singles\r\n\t\t\t\tsetRequestForSingles(urlsArray);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ requestForItem ]\r\n\t);\r\n\r\n\t// Sync currentDisplayData with data\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// when data changes, change currentDispalyData accordingly\r\n\t\t\tlet currentPageData = {};\r\n\t\t\tconst { category, page } = requestForPage;\r\n\r\n\t\t\t// if requestForPage is not same as current page\r\n\t\t\t// remove currentItemData\r\n\t\t\t// if (\r\n\t\t\t// \tJSON.stringify(previousPageRef) !==\r\n\t\t\t// \tJSON.stringify(requestForPage)\r\n\t\t\t// ) {\r\n\t\t\t// \tconsole.log(\r\n\t\t\t// \t\t'previousPageRef, requestForPage',\r\n\t\t\t// \t\tpreviousPageRef,\r\n\t\t\t// \t\trequestForPage\r\n\t\t\t// \t);\r\n\t\t\t// \tsetCurrentDisplayData((prev) => ({\r\n\t\t\t// \t\t...prev,\r\n\t\t\t// \t\tcurrentItemData: {}\r\n\t\t\t// \t}));\r\n\r\n\t\t\t// \tpreviousPageRef = requestForPage;\r\n\t\t\t// }\r\n\r\n\t\t\t// page reducer logic\r\n\t\t\tif (isFetching) {\r\n\t\t\t\tcurrentPageData = { isFetching };\r\n\t\t\t} else if (error !== '') {\r\n\t\t\t\tcurrentPageData = { error };\r\n\t\t\t} else {\r\n\t\t\t\tif (data.hasOwnProperty(category)) {\r\n\t\t\t\t\tlet dataCatKeys = Object.keys(data[category]);\r\n\t\t\t\t\tif (dataCatKeys.includes('pages')) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tObject.keys(data[category].pages).length > 0 &&\r\n\t\t\t\t\t\t\tdata[category].pages.hasOwnProperty(page)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlet itemIdsInPage = data[category].pages[page];\r\n\r\n\t\t\t\t\t\t\tlet pageDisplayArray = itemIdsInPage.map((id) => {\r\n\t\t\t\t\t\t\t\tif (data[category].items.hasOwnProperty(id)) {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\titemId: id,\r\n\t\t\t\t\t\t\t\t\t\titemName: data[category].items[id].name\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tcurrentPageData = { pageItems: pageDisplayArray };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Get and set PageLinks\r\n\t\t\tif (data[category] && data[category].count > 0) {\r\n\t\t\t\tconst count = data[category].count;\r\n\t\t\t\tconst numberOfPages = Math.ceil(count / 10);\r\n\t\t\t\tconst pageLinksArray = [];\r\n\r\n\t\t\t\tfor (let i = 1; i <= numberOfPages; i++) {\r\n\t\t\t\t\tpageLinksArray.push(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentPageData['pageLinks'] = pageLinksArray;\r\n\t\t\t}\r\n\r\n\t\t\tsetCurrentDisplayData((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tcurrentPageData\r\n\t\t\t}));\r\n\t\t},\r\n\t\t[ data, error, isFetching, requestForPage ]\r\n\t);\r\n\r\n\t// Sync currentDisplayData with data\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// Set display data for Item\r\n\r\n\t\t\t// *****\r\n\t\t\t//\r\n\t\t\t// Purpose is send consistent data for render\r\n\t\t\t//\r\n\t\t\t// *****\r\n\r\n\t\t\tconst itemId = requestForItem;\r\n\t\t\tconst [ category ] = itemId.split('_');\r\n\r\n\t\t\tif (data[category] && data[category].items.hasOwnProperty(itemId)) {\r\n\t\t\t\tlet itemData = data[category].items[itemId];\r\n\t\t\t\tlet itemDataToSet = {};\r\n\r\n\t\t\t\t// Iterate through item properties\r\n\t\t\t\tObject.keys(itemData).forEach((keyInItem) => {\r\n\t\t\t\t\tlet value = itemData[keyInItem];\r\n\r\n\t\t\t\t\t// if a value is a single url - turn it into an array\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\ttypeof value === 'string' &&\r\n\t\t\t\t\t\tvalue.includes('https://swapi.co/api/')\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tvalue = [ value ];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// if a property is an array\r\n\t\t\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\t\t\tlet outArray = [];\r\n\r\n\t\t\t\t\t\tvalue.forEach((url) => {\r\n\t\t\t\t\t\t\t// Get item info\r\n\t\t\t\t\t\t\tlet [ urlCat, urlNum ] = getUrlInfo(url);\r\n\t\t\t\t\t\t\tlet urlItemId = getItemId(urlCat, urlNum);\r\n\t\t\t\t\t\t\tlet itemFromData = {};\r\n\r\n\t\t\t\t\t\t\t// Check if item exists in \"data\"\r\n\t\t\t\t\t\t\tif (data[urlCat].items.hasOwnProperty(urlItemId)) {\r\n\t\t\t\t\t\t\t\tlet urlItemData = data[urlCat].items[urlItemId];\r\n\r\n\t\t\t\t\t\t\t\t// ?is it a single or a page item?\r\n\r\n\t\t\t\t\t\t\t\t// case: item from singles\r\n\t\t\t\t\t\t\t\tif (urlItemData.hasOwnProperty('data')) {\r\n\t\t\t\t\t\t\t\t\t// console.log('urlItemData', urlItemData);\r\n\t\t\t\t\t\t\t\t\titemFromData = {\r\n\t\t\t\t\t\t\t\t\t\tisFetching: urlItemData.isFetching,\r\n\t\t\t\t\t\t\t\t\t\terror: urlItemData.error,\r\n\t\t\t\t\t\t\t\t\t\titemName: urlItemData.data.name,\r\n\t\t\t\t\t\t\t\t\t\turl: url\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// case: item from page\r\n\r\n\t\t\t\t\t\t\t\t\titemFromData = {\r\n\t\t\t\t\t\t\t\t\t\titemName: urlItemData.name,\r\n\t\t\t\t\t\t\t\t\t\turl: url\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\titemFromData = {\r\n\t\t\t\t\t\t\t\t\titemName: '',\r\n\t\t\t\t\t\t\t\t\turl: url\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\toutArray.push(itemFromData);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\titemDataToSet[keyInItem] = outArray;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titemDataToSet[keyInItem] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetCurrentDisplayData((prev) => ({\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tcurrentItemData: itemDataToSet\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ data, requestForItem ]\r\n\t);\r\n\r\n\treturn [\r\n\t\tcurrentDisplayData,\r\n\t\tsetRequestForPage,\r\n\t\tsetRequestForItem,\r\n\t\terror,\r\n\t\tisFetching\r\n\t];\r\n};\r\n\r\nexport default useSwApi;\r\n","import React from 'react';\r\nimport CONSTANTS from '../../../constants.json';\r\n\r\nconst uuid = require('uuid/v4');\r\n\r\nlet inCategories = CONSTANTS.categories;\r\nconst categories = inCategories.map((cat) => {\r\n\treturn {\r\n\t\tname: cat,\r\n\t\tdisplay: `${cat[0].toUpperCase()}${cat.slice(1)}`\r\n\t};\r\n});\r\n\r\nconst Categories = (props) => {\r\n\tconst { currentCategory, changeCategory } = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"v6_terms\">\r\n\t\t\t{categories.map((cat) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"v6_button v6_category\"\r\n\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\tonClick={() => changeCategory(cat.name)}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: `${currentCategory === cat.name\r\n\t\t\t\t\t\t\t? CONSTANTS.SW_COLOR\r\n\t\t\t\t\t\t\t: 'inherit'}`\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{cat.display}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Categories;\r\n","import React from 'react';\r\n\r\nimport './Loader.css';\r\n\r\n// import ligthsaber from '../../../img/lightsaber_blue2.png';\r\nimport ligthsaber from '../../../../img/lightsaber_blue2.png';\r\n\r\nconst Loader = () => (\r\n\t<div className=\"v6_loader-box\">\r\n\t\t<img className=\"v6_lightsaber\" src={ligthsaber} alt=\"Lightsaber blue\" />\r\n\t</div>\r\n);\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport Loader from '../displays/Loader/Loader';\r\n\r\nimport CONSTANTS from '../../../constants.json';\r\nconst uuid = require('uuid/v4');\r\n\r\nconst Pages = (props) => {\r\n\tconst { pageItems, changeItem, currentItem, error, isFetching } = props;\r\n\r\n\tif (error) {\r\n\t\treturn <div>Error: {error}</div>;\r\n\t} else if (isFetching) {\r\n\t\treturn (\r\n\t\t\t<div className=\"v6_menu\">\r\n\t\t\t\t<div className=\"v6_menuItems\">\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t</div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<div className=\"v6_menu\">\r\n\t\t\t\t<div className=\"v6_menuItems\">\r\n\t\t\t\t\t{pageItems &&\r\n\t\t\t\t\t\tpageItems.length > 0 &&\r\n\t\t\t\t\t\tpageItems.map((item) => (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"v6_button\"\r\n\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\tonClick={() => changeItem(item.itemId)}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tcolor: `${currentItem === item.itemId\r\n\t\t\t\t\t\t\t\t\t\t? CONSTANTS.SW_COLOR\r\n\t\t\t\t\t\t\t\t\t\t: 'inherit'}`\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{item.itemName}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default Pages;\r\n","import React from 'react';\r\nimport './PageLinks.css';\r\n\r\nimport CONSTANTS from '../../../constants.json';\r\nconst uuid = require('uuid/v4');\r\n\r\nconst PageLinks = (props) => {\r\n\tconst { changePage, currentPage, pageLinks } = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"v6_pageLinks\">\r\n\t\t\t{pageLinks &&\r\n\t\t\t\tpageLinks.length > 0 &&\r\n\t\t\t\tpageLinks.map((link) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"v6_button v6_pageLink\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tcolor: `${currentPage === link\r\n\t\t\t\t\t\t\t\t\t? CONSTANTS.SW_COLOR\r\n\t\t\t\t\t\t\t\t\t: 'inherit'}`\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\tvalue={link}\r\n\t\t\t\t\t\t\tonClick={() => changePage(link)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{link}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageLinks;\r\n","import React from 'react';\r\nimport './LoaderForItem.css';\r\n\r\nconst LoaderForItem = (props) => {\r\n\treturn (\r\n\t\t<div className=\"v6_loaderBar-box\">\r\n\t\t\t<div className=\"v6_loader-bar\" />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LoaderForItem;\r\n","import {\r\n\tgetLocaleNumber,\r\n\tgetUTCDate,\r\n\tcapitalizeTitleCase,\r\n\tcapitalizeSentenceCase,\r\n\tcapitalizeCommaList,\r\n\torderByKeyGroups,\r\n\tremoveUnderscores\r\n} from './helpers';\r\n\r\n// Number to localestring\r\n// Date to localedate\r\n// Capitalize one word\r\n// Capitalize first word\r\n// Capitalize each word in comma-separated list\r\n// Remove empty keyVal pairs\r\n// Order to singles, opening-crawl, arrays (films last)\r\n\r\nexport const prepareItemData = (initObj) => {\r\n\tlet outObj = {};\r\n\r\n\tlet inObj = orderByKeyGroups(initObj);\r\n\r\n\tObject.keys(inObj).forEach((key) => {\r\n\t\tlet val = inObj[key];\r\n\r\n\t\tif (key === 'episode_id') {\r\n\t\t\tkey = 'episode';\r\n\t\t}\r\n\t\tkey = capitalizeTitleCase(removeUnderscores(key));\r\n\r\n\t\tif (\r\n\t\t\ttypeof val === 'number' ||\r\n\t\t\tval === Number.parseFloat(val).toString()\r\n\t\t) {\r\n\t\t\toutObj[key] = getLocaleNumber(val);\r\n\t\t} else if (key.includes('date') || key.includes('Date')) {\r\n\t\t\toutObj[key] = getUTCDate(val);\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (key !== 'Opening Crawl' && val.includes(',')) {\r\n\t\t\t\toutObj[key] = capitalizeSentenceCase(val);\r\n\t\t\t} else if (val === 'n/a') {\r\n\t\t\t\toutObj[key] = val;\r\n\t\t\t} else {\r\n\t\t\t\toutObj[key] = capitalizeSentenceCase(val);\r\n\t\t\t}\r\n\t\t} else if (Array.isArray(val)) {\r\n\t\t\toutObj[key] = val;\r\n\t\t}\r\n\t});\r\n\r\n\treturn outObj;\r\n};\r\n","import React from 'react';\nimport { getUrlInfo } from '../helpers/helpers';\nimport LoaderForItem from '../displays/LoaderForItem';\nimport { prepareItemData } from '../helpers/prepareItemData';\nimport './Detail.css';\n\nconst uuid = require('uuid/v4');\n\nconst Detail = (props) => {\n\tconst {\n\t\tcurrentCategory,\n\t\tcurrentItem,\n\t\titemData,\n\t\tpageItems,\n\t\tisFetching\n\t} = props;\n\tconst inData = { ...itemData };\n\tconst detailData = prepareItemData(inData);\n\n\tif (\n\t\t!currentItem ||\n\t\t(currentItem &&\n\t\t\tpageItems &&\n\t\t\tpageItems.length > 0 &&\n\t\t\t!Object.values(pageItems)\n\t\t\t\t.map((i) => i.itemId)\n\t\t\t\t.includes(currentItem)) ||\n\t\t(currentCategory &&\n\t\t\titemData.hasOwnProperty('url') &&\n\t\t\tgetUrlInfo(itemData.url[0].url)[0] !== currentCategory)\n\t) {\n\t\treturn <div className=\"v6_detail\" />;\n\t}\n\n\treturn (\n\t\t<div className=\"v6_detail\">\n\t\t\t<div>\n\t\t\t\t{Object.entries(detailData).map((el) => {\n\t\t\t\t\t// el is an object\n\t\t\t\t\tif (Array.isArray(el[1])) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={uuid()} className=\"v6_keyValArray\">\n\t\t\t\t\t\t\t\t<div className=\"v6_above\">{el[0]}</div>\n\t\t\t\t\t\t\t\t<div className=\"v6_below\">\n\t\t\t\t\t\t\t\t\t{el[1].map((valInside) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tkey={uuid()}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"v6_array-single\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'needs a handler...'\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{valInside.isFetching && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<LoaderForItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem={valInside}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{!valInside.isFetching && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{valInside.itemName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (el[0] === 'Name') {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={uuid()} className=\"v6_nameBox\">\n\t\t\t\t\t\t\t\t<div className=\"v6_above\">{el[1]}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={uuid()}\n\t\t\t\t\t\t\t\tclassName={`${el[0] === 'Opening Crawl'\n\t\t\t\t\t\t\t\t\t? 'v6_openingCrawl'\n\t\t\t\t\t\t\t\t\t: 'v6_keyValBox'}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${el[0] === 'Opening Crawl'\n\t\t\t\t\t\t\t\t\t\t? 'v6_above'\n\t\t\t\t\t\t\t\t\t\t: 'v6_left'}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{el[0]}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${el[0] === 'Opening Crawl'\n\t\t\t\t\t\t\t\t\t\t? 'v6_below'\n\t\t\t\t\t\t\t\t\t\t: 'v6_right'}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{el[1]}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Detail;\n","import React from 'react';\r\n\r\nimport { ReactComponent as StarWarsLogo } from '../../../img/Star_Wars_Logo.svg';\r\n\r\nconst Header = () => {\r\n\treturn <StarWarsLogo className=\"v6_swLogo\" />;\r\n};\r\n\r\nexport default Header;\r\n","import React, { useState, useEffect } from 'react';\r\nimport useSwApi from '../hooks/useSwApi';\r\n\r\nimport Categories from '../displays/Categories';\r\nimport Pages from '../displays/Pages';\r\nimport PageLinks from '../displays/PageLinks';\r\nimport Detail from '../displays/Detail';\r\nimport Header from '../displays/Header';\r\n\r\nimport './V6.css';\r\n\r\nconst V6 = () => {\r\n\tconst [ displayCategory, setDisplayCategory ] = useState('planets');\r\n\tconst [ displayPage, setDisplayPage ] = useState(1);\r\n\tconst [ displayItem, setDisplayItem ] = useState(''); // eg: 'films_1'\r\n\r\n\tconst [\r\n\t\t{ currentPageData, currentItemData },\r\n\t\tsetRequestForPage,\r\n\t\tsetRequestForItem,\r\n\t\terror,\r\n\t\tisFetching\r\n\t] = useSwApi();\r\n\r\n\t// Page data sync\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tlet { pageItems } = currentPageData;\r\n\r\n\t\t\tlet newDisplayPage = 1;\r\n\r\n\t\t\tif (\r\n\t\t\t\tpageItems &&\r\n\t\t\t\tpageItems.length > 0 &&\r\n\t\t\t\tpageItems[0].itemId.split('_')[0] !== displayCategory\r\n\t\t\t) {\r\n\t\t\t\tnewDisplayPage = 1;\r\n\t\t\t\tsetDisplayPage(1);\r\n\t\t\t} else {\r\n\t\t\t\tnewDisplayPage = displayPage;\r\n\t\t\t}\r\n\t\t\t// displayPage changes -> setRequestForPage\r\n\t\t\tsetRequestForPage({\r\n\t\t\t\tcategory: displayCategory,\r\n\t\t\t\tpage: newDisplayPage\r\n\t\t\t});\r\n\t\t\t// console.log('page sync');\r\n\t\t},\r\n\t\t[ displayCategory, displayPage, setRequestForPage ]\r\n\t);\r\n\r\n\t// Item data sync\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// displayItem changes -> setRequestForItem\r\n\t\t\tsetRequestForItem(displayItem);\r\n\t\t},\r\n\t\t[ displayItem, setRequestForItem ]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetDisplayItem('');\r\n\t\t},\r\n\t\t[ displayPage ]\r\n\t);\r\n\r\n\tconst Content = (props) => (\r\n\t\t<div className=\"v6_content\">{props.children}</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"v6_page\">\r\n\t\t\t<Header />\r\n\t\t\t<Content>\r\n\t\t\t\t<Categories\r\n\t\t\t\t\tcurrentCategory={displayCategory}\r\n\t\t\t\t\tchangeCategory={setDisplayCategory}\r\n\t\t\t\t/>\r\n\t\t\t\t<Pages\r\n\t\t\t\t\tcurrentItem={displayItem}\r\n\t\t\t\t\tpageItems={currentPageData.pageItems}\r\n\t\t\t\t\tchangeItem={setDisplayItem}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t\tisFetching={isFetching}\r\n\t\t\t\t>\r\n\t\t\t\t\t<PageLinks\r\n\t\t\t\t\t\tcurrentPage={displayPage}\r\n\t\t\t\t\t\tpageLinks={currentPageData.pageLinks}\r\n\t\t\t\t\t\tchangePage={setDisplayPage}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Pages>\r\n\t\t\t\t<Detail\r\n\t\t\t\t\tcurrentCategory={displayCategory}\r\n\t\t\t\t\tcurrentItem={displayItem}\r\n\t\t\t\t\titemData={currentItemData}\r\n\t\t\t\t\tpageItems={currentPageData.pageItems}\r\n\t\t\t\t\tisFetching={isFetching}\r\n\t\t\t\t/>\r\n\t\t\t</Content>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default V6;\r\n","import React, { useState } from 'react';\n\nimport Intro from '../Intro/Intro';\nimport V1 from '../v1/v1/V1';\nimport V2 from '../v2/v2/V2';\nimport V3 from '../v3/v3/V3';\nimport V4 from '../v4/v4/V4';\nimport V5 from '../v5/v5/V5';\nimport V6 from '../v6/v6/V6';\n\nimport './App.css';\n\nfunction App() {\n\tconst [ version, setVersion ] = useState('6');\n\n\tconst handleChange = (e) => {\n\t\tsetVersion(e.target.value);\n\t};\n\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t{/* <div className=\"select\"> */}\n\t\t\t<select className=\"select\" value={version} onChange={handleChange}>\n\t\t\t\t<option value=\"0\">start</option>\n\t\t\t\t<option value=\"1\">version 1</option>\n\t\t\t\t<option value=\"2\">version 2</option>\n\t\t\t\t<option value=\"3\">version 3</option>\n\t\t\t\t<option value=\"4\">version 4</option>\n\t\t\t\t<option value=\"5\">version 5</option>\n\t\t\t\t<option value=\"6\">version 6</option>\n\t\t\t</select>\n\t\t\t{/* </div> */}\n\n\t\t\t{version === '0' && <Intro setVersion={setVersion} />}\n\t\t\t{version === '1' && <V1 />}\n\t\t\t{version === '2' && <V2 setVersion={setVersion} />}\n\t\t\t{version === '3' && <V3 setVersion={setVersion} />}\n\t\t\t{version === '4' && <V4 setVersion={setVersion} />}\n\t\t\t{version === '5' && <V5 setVersion={setVersion} />}\n\t\t\t{version === '6' && <V6 setVersion={setVersion} />}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}